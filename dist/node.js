/*! version: 3.0.0-beta.1 - date: 2018-11-07 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WakandaClient=e():t.WakandaClient=e()}(global,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}({"../package.json":
/*!***********************!*\
  !*** ../package.json ***!
  \***********************/
/*! exports provided: name, main, version, description, browser, repository, scripts, author, license, devDependencies, dependencies, husky, default */function(t){t.exports={name:"wakanda-client",main:"dist/node.js",version:"3.0.0-beta.1",description:"Wakanda Client allows you to easily interact with Wakanda Server on a JavaScript (browser or node) environment",browser:"browser/wakanda-client.min.js",repository:"wakanda/wakanda-javascript-client",scripts:{lint:"eslint .",watch:"webpack --progress --colors --watch",build:"webpack --progress --colors","test:all":"npm run test:karma && npm run test:node","test:karma":"karma start","test:node":"mocha test/bootstrap.js test/spec/**/*.spec.js",test:"node runTests.js","test-server:record":"node test/connect/server.js record",serve:'concurrently -r "npm run watch" "npm run serve:proxy"',tsc:"tsc",codecov:"cat coverage/*/lcov.info | codecov","serve:proxy":"node ./scripts/proxy.js"},author:"Wakanda SAS",license:"MIT",devDependencies:{"@babel/cli":"^7.1.0","@babel/core":"^7.1.0","@babel/preset-env":"^7.1.0","babel-loader":"^8.0.2",chai:"^4.1.2",chalk:"^2.4.1","clean-webpack-plugin":"^0.1.19",concurrently:"^4.0.1",connect:"^3.6.6","connect-prism":"git+https://git@github.com/seglo/connect-prism.git",eslint:"^5.6.0","eslint-loader":"^2.1.0",express:"^4.16.3","http-proxy-middleware":"^0.19.0",husky:"^1.0.0-rc.14","istanbul-instrumenter-loader":"^3.0.1",karma:"^3.0.0","karma-chai":"^0.1.0","karma-coverage":"^1.1.2","karma-coverage-istanbul-reporter":"^2.0.4","karma-mocha":"^1.3.0","karma-phantomjs-launcher":"^1.0.4","karma-verbose-reporter":"0.0.6",lodash:"^4.17.11",mocha:"^5.2.0",moment:"^2.22.2",path:"^0.12.7","phantomjs-prebuilt":"^2.1.16","ts-loader":"^5.1.1",tslint:"^5.11.0","tslint-loader":"^3.6.0",typescript:"^2.9.2",webpack:"^4.19.1","webpack-cli":"^3.1.0"},dependencies:{"core-js":"^2.5.7",request:"^2.88.0"},husky:{hooks:{"pre-commit":"npm run lint && npm test","pre-push":"npm run lint && npm test","post-merge":"npm i"}}}},"./business/abstract-business.ts":
/*!***************************************!*\
  !*** ./business/abstract-business.ts ***!
  \***************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t){var e=t.wakJSC;this.wakJSC=e}}();e.default=n},"./business/catalog-business.ts":
/*!**************************************!*\
  !*** ./business/catalog-business.ts ***!
  \**************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-business */"./business/abstract-business.ts"),i=r(/*! ../data-access/service/catalog-service */"./data-access/service/catalog-service.ts"),s=r(/*! ../presentation/catalog */"./presentation/catalog.ts"),o=r(/*! ../presentation/dataclass */"./presentation/dataclass.ts"),c=r(/*! ./dataclass-business */"./business/dataclass-business.ts"),u=function(t){function e(e){var r=t.call(this,e)||this;return r.service=new i.default({wakJSC:r.wakJSC}),r}return n(e,t),e.prototype.needDataClass=function(t){-1===this.seenDataClasses.indexOf(t)&&this.seenDataClasses.push(t)},e.prototype.get=function(t){var e=this;return this.seenDataClasses=[],this.service.get(t).then(function(t){for(var r=[],n=0,a=t;n<a.length;n++){for(var i=a[n],u=[],l=function(r){switch(r.kind){case"relatedEntity":u.push(new o.AttributeRelated({name:r.name,type:r.type,kind:r.kind})),e.needDataClass(r.type);break;case"storage":case"calculated":case"alias":var n=r.readOnly||"image"===r.type||"blob"===r.type,a=void 0!==r.simpleDate?r.simpleDate:void 0;u.push(new o.Attribute({name:r.name,type:r.type,readOnly:n,kind:r.kind,simpleDate:a}));break;case"relatedEntities":var i;t.some(function(t){if(t.collectionName===r.type)return i=t.name,!0});var s=new o.AttributeCollection({name:r.name,type:r.type,kind:r.kind,entityType:i});u.push(s),e.needDataClass(s.entityType);break;default:throw new Error("[WakandaClient] Unhandled "+r.kind+" attribute type")}},p=0,d=i.attributes;p<d.length;p++){l(d[p])}for(var f={entity:[],collection:[],dataClass:[]},h=0,y=i.methods;h<y.length;h++){var v=y[h];switch(v.applyTo){case"entity":f.entity.push(v.name);break;case"entityCollection":f.collection.push(v.name);break;case"dataClass":f.dataClass.push(v.name);break;default:throw new Error("[WakandaClient] Unrecognized "+v.applyTo+" method type")}}var _=new o.DataClass({name:i.name,collectionName:i.collectionName,attributes:u,methods:f});new c.default({wakJSC:e.wakJSC,dataClass:_,methods:f,dataURI:i.dataURI})._decorateDataClass(),r.push(_)}for(var b=new s.default({dataClasses:r}),m=0,C=e.seenDataClasses;m<C.length;m++){var g=C[m];if(!b[g])throw new Error("Needed "+g+" dataClass is not present on catalog")}return b})},e}(a.default);e.default=u},"./business/collection-business.ts":
/*!*****************************************!*\
  !*** ./business/collection-business.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-business */"./business/abstract-business.ts"),i=r(/*! ../data-access/service/collection-service */"./data-access/service/collection-service.ts"),s=r(/*! ../const */"./const.ts"),o=r(/*! ./method-adapter */"./business/method-adapter.ts"),c=function(t){function e(e){var r=e.wakJSC,n=e.dataClass,a=e.collection,s=e.dataClassBusiness,o=e.collectionUri,c=e.pageSize,u=e.initialSelect,l=t.call(this,{wakJSC:r})||this;return l.collection=a,l.dataClass=n,l.dataClassBusiness=s,l.service=new i.default({wakJSC:r,collection:a,dataClassBusiness:s,collectionUri:o}),l.pageSize=c,l.initialSelect=u,l}return n(e,t),e.prototype._decorateCollection=function(){this.collection.fetch=this.fetch.bind(this),this.collection.nextPage=this.nextPage.bind(this),this.collection.prevPage=this.prevPage.bind(this),this.collection.more=this.more.bind(this),this._addUserDefinedMethods()},e.prototype.fetch=function(t){var e=this,r=t||{};if(r.method&&r.method.length>0)throw new Error("Collection.fetch: option method is not allowed");return r.pageSize||(r.pageSize=this.pageSize?this.pageSize:s.default.DEFAULT_PAGE_SIZE),r.select&&(this.initialSelect=r.select),this.pageSize=r.pageSize,this.service.fetch(r).then(function(t){var r=e.dataClassBusiness._presentationCollectionFromDbo({dbo:t,pageSize:e.pageSize});return e._refreshCollection({fresherCollection:r}),e.collection})},e.prototype.more=function(){var t=this;if(!0===this.collection._deferred)throw new Error("Collection.more: can not call more on a deferred collection");var e={start:this.collection._first+this.collection._sent,pageSize:this.pageSize};return this.initialSelect&&(e.select=this.initialSelect),this.service.fetch(e).then(function(e){t.collection._sent+=e.__ENTITIES.length;for(var r=0,n=e.__ENTITIES;r<n.length;r++){var a=n[r];t.collection.entities.push(t.dataClassBusiness._presentationEntityFromDbo({dbo:a}))}return t.collection})},e.prototype.nextPage=function(){if(!0===this.collection._deferred)throw new Error("Collection.nextPage: can not call nextPage on a deferred collection");var t={start:this.collection._first+this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype.prevPage=function(){if(!0===this.collection._deferred)throw new Error("Collection.prevPage: can not call prevPage on a deferred collection");var t={start:this.collection._first-this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.collection.forEach(function(r){t.collection[r]=function(){var t=Array.from(arguments);return e.callMethod(r,t)}})},e.prototype.callMethod=function(t,e){var r=this;if(this.collection._deferred)throw new Error("Collection."+t+": can not be called on a deferred collection");return this.service.callMethod(t,e).then(function(t){return o.MethodAdapter.transform(t,r.dataClassBusiness._dataClassBusinessMap)})},e.prototype._refreshCollection=function(t){var e=t.fresherCollection;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof e[r]&&(this.collection[r]=e[r])},e}(a.default);e.default=c},"./business/dataclass-business.ts":
/*!****************************************!*\
  !*** ./business/dataclass-business.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-business */"./business/abstract-business.ts"),i=r(/*! ./entity-business */"./business/entity-business.ts"),s=r(/*! ../data-access/service/dataclass-service */"./data-access/service/dataclass-service.ts"),o=r(/*! ./collection-business */"./business/collection-business.ts"),c=r(/*! ./media-business */"./business/media-business.ts"),u=r(/*! ../presentation/entity */"./presentation/entity.ts"),l=r(/*! ../presentation/collection */"./presentation/collection.ts"),p=r(/*! ../presentation/dataclass */"./presentation/dataclass.ts"),d=r(/*! ../presentation/media */"./presentation/media.ts"),f=r(/*! ../const */"./const.ts"),h=r(/*! ./method-adapter */"./business/method-adapter.ts"),y=r(/*! ./util */"./business/util.ts"),v=new Map,_=function(t){function e(e){var r=e.wakJSC,n=e.dataClass,a=e.methods,i=e.dataURI,o=t.call(this,{wakJSC:r})||this;return o.dataClass=n,o.methods=a,o.service=new s.default({wakJSC:o.wakJSC,dataClassBusiness:o}),o.dataURI=i,v.set(n.name,o),o._dataClassBusinessMap=v,o}return n(e,t),e.prototype._decorateDataClass=function(){this.dataClass.find=this.find.bind(this),this.dataClass.query=this.query.bind(this),this.dataClass.create=this.create.bind(this),this._addUserDefinedMethods()},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.methods.dataClass.forEach(function(r){t.dataClass[r]=function(){var t=Array.from(arguments);return e.callMethod(r,t)}})},e.prototype.callMethod=function(t,e){var r=this;return this.service.callMethod(t,e).then(function(t){return h.MethodAdapter.transform(t,r._dataClassBusinessMap)})},e.prototype.find=function(t,e){var r=this,n=e||{};if(void 0!==n.filter||void 0!==n.params||void 0!==n.pageSize||void 0!==n.start||void 0!==n.orderBy)throw new Error("Dataclass.find: options filter, params, pageSize, start and orderBy are not allowed");return this.service.find(t,n).then(function(t){return r._presentationEntityFromDbo({dbo:t})})},e.prototype.query=function(t){var e=this,r=t||{},n=r.select;if(r.method&&r.method.length>0)throw new Error("Dataclass.query: option method is not allowed");return r.pageSize||(r.pageSize=f.default.DEFAULT_PAGE_SIZE),this.service.query(r).then(function(t){return e._presentationCollectionFromDbo({dbo:t,pageSize:r.pageSize,initialSelect:n})})},e.prototype.create=function(t){var e={};if(t)for(var r in t)t[r]instanceof u.default&&(e[r]=t[r],delete t[r]);var n=this._presentationEntityFromDbo({dbo:t||{}});for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},e.prototype._createEntity=function(t){var e=t.key,r=t.deferred,n=t.dbo,a=new u.default({key:e,deferred:r,dataClass:this.dataClass}),s=new i.default({wakJSC:this.wakJSC,dataClass:this.dataClass,entity:a,dataClassBusiness:this});return s._decorateEntity(),r||(this._populateEntityDataFromDbo({dbo:n,entity:a}),s._flashEntityValues()),a},e.prototype._createCollection=function(t){var e=t.uri,r=t.deferred,n=t.pageSize,a=t.initialSelect,i=new l.default({deferred:r,dataClass:this.dataClass});return new o.default({wakJSC:this.wakJSC,dataClass:this.dataClass,dataClassBusiness:this,collection:i,collectionUri:e,pageSize:n,initialSelect:a})._decorateCollection(),i},e.prototype._createMedia=function(t){var e=t.uri,r=t.isImage,n=t.attributeName,a=t.entity,i=new d.default({uri:e});return new c.default({wakJSC:this.wakJSC,media:i,dataClassBusiness:this,isImage:r,attributeName:n,entity:a})._decorateMedia(),i},e.prototype._populateEntityDataFromDbo=function(t){var e=t.dbo,r=t.entity;r._stamp=e.__STAMP;for(var n=0,a=this.dataClass.attributes;n<a.length;n++){var i=a[n],s=e[i.name];if(null!==s&&void 0!==s)if(i instanceof p.AttributeRelated){var o=v.get(i.type);r[i.name]=o._presentationEntityFromDbo({dbo:s})}else if(i instanceof p.AttributeCollection){o=v.get(i.entityType);r[i.name]=o._presentationCollectionFromDbo({dbo:s})}else if("image"===i.type||"blob"===i.type){var c=void 0;c=s&&s.__deferred&&s.__deferred.uri?s.__deferred.uri:null,r[i.name]=this._createMedia({uri:c,isImage:"image"===i.type,attributeName:i.name,entity:r})}else"date"===i.type?r[i.name]=s?i.simpleDate?y.default.wakParseSimpleDate(s):new Date(s):null:r[i.name]=s;else"image"===i.type||"blob"===i.type?r[i.name]=this._createMedia({uri:null,isImage:"image"===i.type,attributeName:i.name,entity:r}):r[i.name]=null}return r},e.prototype._presentationEntityFromDbo=function(t){var e=t.dbo;return e||null,e.__deferred?this._createEntity({key:e.__deferred.__KEY,deferred:!0}):this._createEntity({key:e.__KEY,dbo:e})},e.prototype._presentationCollectionFromDbo=function(t){var e,r=t.dbo,n=t.pageSize,a=t.initialSelect;if(r)if(r.__deferred)e=this._createCollection({deferred:!0,uri:r.__deferred.uri});else{(e=this._createCollection({uri:r.__ENTITYSET,pageSize:n||r.__ENTITIES.length,initialSelect:a}))._count=r.__COUNT,e._first=r.__FIRST,e._sent=r.__SENT,e._pageSize=n;for(var i=0,s=r.__ENTITIES;i<s.length;i++){var o=s[i];e.entities.push(this._presentationEntityFromDbo({dbo:o}))}}else e=null;return e},e}(a.default);e.default=_},"./business/directory-business.ts":
/*!****************************************!*\
  !*** ./business/directory-business.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-business */"./business/abstract-business.ts"),i=r(/*! ../data-access/service/directory-service */"./data-access/service/directory-service.ts"),s=r(/*! ../const */"./const.ts"),o=function(t){function e(e){var r=e.wakJSC,n=t.call(this,{wakJSC:r})||this;return n.service=new i.default({wakJSC:r}),n}return n(e,t),e.prototype.login=function(t,e,r){var n=r||s.default.DEFAULT_SESSION_DURATION;if("number"!=typeof n||n<=0)throw new Error("Directory.login: invalid duration parameter");return this.service.login(t,e,n).catch(function(){return Promise.reject(new Error("Directory.login: Unauthorized"))})},e.prototype.logout=function(){return this.service.logout().catch(function(){return Promise.reject(new Error("Directory.logout: logout failed"))})},e.prototype.getCurrentUser=function(){return this.service.getCurrentUser().then(function(t){return t}).catch(function(){return Promise.reject(new Error("Directory.getCurrentUser: user is not logged in"))})},e.prototype.getCurrentUserBelongsTo=function(t){if("string"!=typeof t)throw new Error("Directory.getCurrentUserBelongsTo: group must be a string");return this.service.getCurrentUserBelongsTo(t).then(function(){return!0}).catch(function(){return!1})},e}(a.default);e.default=o},"./business/entity-business.ts":
/*!*************************************!*\
  !*** ./business/entity-business.ts ***!
  \*************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-business */"./business/abstract-business.ts"),i=r(/*! ../data-access/service/entity-service */"./data-access/service/entity-service.ts"),s=r(/*! ../presentation/dataclass */"./presentation/dataclass.ts"),o=r(/*! ../presentation/entity */"./presentation/entity.ts"),c=r(/*! ./method-adapter */"./business/method-adapter.ts"),u=r(/*! ../presentation/media */"./presentation/media.ts"),l=r(/*! ./util */"./business/util.ts"),p=function(t){function e(e){var r=e.wakJSC,n=e.entity,a=e.dataClass,s=e.dataClassBusiness,o=t.call(this,{wakJSC:r})||this;return o.entity=n,o.dataClass=a,o.dataClassBusiness=s,o.service=new i.default({wakJSC:r,entity:n,dataClassBusiness:s}),o}return n(e,t),e.prototype._decorateEntity=function(){this.entity.save=this.save.bind(this),this.entity.delete=this.delete.bind(this),this.entity.fetch=this.fetch.bind(this),this.entity.recompute=this.recompute.bind(this),this._addUserDefinedMethods()},e.prototype._flashEntityValues=function(){for(var t={},e=this.entity,r=0,n=this.dataClass.attributes;r<n.length;r++){var a=n[r],i=e[a.name];if(!(a instanceof s.AttributeCollection))if(a instanceof s.AttributeRelated)t[a.name]=i?i._key:null;else switch(a.type){case"image":case"blob":t[a.name]={uri:i.uri};break;case"object":t[a.name]=JSON.stringify(i);break;case"date":t[a.name]=i?a.simpleDate?l.default.wakToStringSimpleDate(i):i.toJSON():null;break;default:t[a.name]=i}}this._oldEntityValues=t},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.entity.forEach(function(r){t.entity[r]=function(){var t=Array.from(arguments);return e.callMethod(r,t)}})},e.prototype.fetch=function(t){var e=this,r=t||{};if(void 0!==r.filter||void 0!==r.params||void 0!==r.pageSize||void 0!==r.start||void 0!==r.orderBy)throw new Error("Entity.fetch: options filter, params, pageSize, start and orderBy are not allowed");return this.dataClassBusiness.find(this.entity._key,t).then(function(t){return e._refreshEntity({fresherEntity:t}),e._flashEntityValues(),e.entity})},e.prototype.callMethod=function(t,e){var r=this;if(!this.entity._key)throw new Error("Entity."+t+": can not be called on an unsaved entity");return this.service.callMethod(t,e).then(function(t){return c.MethodAdapter.transform(t,r.dataClassBusiness._dataClassBusinessMap)})},e.prototype.delete=function(){var t=this;if(!this.entity._key)throw new Error("Entity.delete: can not delete unsaved entity");return this.service.delete().then(function(){t.entity=null})},e.prototype.save=function(){var t=this,e=this.prepareDataForSave(),r=this._getExpandString();return this.service.save(e,r).then(function(e){var r=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:r}),t._flashEntityValues(),t.entity})},e.prototype.recompute=function(){var t=this,e=this.prepareDataForSave();return this.service.recompute(e).then(function(e){var r=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:r}),t.entity})},e.prototype.prepareDataForSave=function(){var t={},e=!1;this.entity._key&&this.entity._stamp?(t.__KEY=this.entity._key,t.__STAMP=this.entity._stamp):e=!0;for(var r=0,n=this.dataClass.attributes;r<n.length;r++){var a=n[r],i=this.entity[a.name];if(void 0===i&&(i=null),a instanceof s.AttributeRelated)t[a.name]=i?i._key:null;else{if(a.readOnly)continue;"date"===a.type?t[a.name]=i?a.simpleDate?l.default.wakToStringSimpleDate(i):i.toJSON():i:a instanceof s.AttributeCollection||e&&null===i&&"ID"!==a.name||(t[a.name]=i)}}if(!e)for(var o=this._oldEntityValues||{},c=0,u=this.dataClass.attributes;c<u.length;c++){if(void 0!==t[(a=u[c]).name]&&"ID"!==a.name)switch(a.type){case"image":case"blob":t[a.name].uri===o[a.name].uri&&delete t[a.name];break;case"object":JSON.stringify(t[a.name])===o[a.name]&&delete t[a.name];break;default:t[a.name]===o[a.name]&&delete t[a.name]}}return t},e.prototype._refreshEntity=function(t){var e=t.fresherEntity;for(var r in e)e.hasOwnProperty(r)&&"function"!=typeof e[r]&&(e[r]instanceof u.default?this.entity[r].uri=e[r].uri:this.entity[r]=e[r])},e.prototype._getExpandString=function(){for(var t="",e=0,r=this.dataClass.attributes;e<r.length;e++){var n=r[e];(n instanceof s.AttributeRelated||n instanceof s.AttributeCollection)&&this.entity[n.name]instanceof o.default&&!this.entity[n.name]._deferred&&(t+=n.name+",")}return t.length>0?t.slice(0,-1):null},e}(a.default);e.default=p},"./business/media-business.ts":
/*!************************************!*\
  !*** ./business/media-business.ts ***!
  \************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-business */"./business/abstract-business.ts"),i=r(/*! ../data-access/service/media-service */"./data-access/service/media-service.ts"),s=function(t){function e(e){var r=e.wakJSC,n=e.media,a=e.dataClassBusiness,s=e.isImage,o=e.attributeName,c=e.entity,u=t.call(this,{wakJSC:r})||this;return u.media=n,u.entity=c,u.dataClassBusiness=a,u.isImage=!0===s,u.service=new i.default({wakJSC:r,mediaBusiness:u,media:n,attributeName:o,dataClassBusiness:a}),u}return n(e,t),e.prototype._decorateMedia=function(){this.media.upload=this.upload.bind(this),this.media.delete=this.delete.bind(this)},e.prototype.upload=function(t){var e=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before uploading a media");return this.service.upload(t,t.type).then(function(t){return t}).then(function(){return e.entity.fetch()})},e.prototype.delete=function(){var t=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before deleting a media");return this.service.delete().then(function(){return t.entity.fetch()})},e}(a.default);e.default=s},"./business/method-adapter.ts":
/*!************************************!*\
  !*** ./business/method-adapter.ts ***!
  \************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.transform=function(t,e){if(t&&t.__entityModel){var r=e.get(t.__entityModel);if(r){if(void 0!==t.__COUNT&&void 0!==t.__ENTITIES&&void 0!==t.__FIRST&&void 0!==t.__SENT)return r._presentationCollectionFromDbo({dbo:t});if(t.__KEY&&t.__STAMP)return r._presentationEntityFromDbo({dbo:t})}}return t},t}();e.MethodAdapter=n},"./business/util.ts":
/*!**************************!*\
  !*** ./business/util.ts ***!
  \**************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.wakParseSimpleDate=function(t){if(!t)return null;var e=t.split("!");return 3!==e.length?null:new Date(Date.UTC(parseInt(e[2],10),parseInt(e[1],10)-1,parseInt(e[0],10)))},t.wakToStringSimpleDate=function(t){return t instanceof Date?t.getUTCDate()+"!"+(t.getUTCMonth()+1)+"!"+t.getUTCFullYear():null},t}();e.default=n},"./const.ts":
/*!******************!*\
  !*** ./const.ts ***!
  \******************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={DEFAULT_PAGE_SIZE:40,DEFAULT_SESSION_DURATION:3600}},"./data-access/http/http-client.ts":
/*!*****************************************!*\
  !*** ./data-access/http/http-client.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=t.apiPrefix;this.prefix=e,this._getRequestInterceptors=[],this._postRequestInterceptors=[],this._getResponseInterceptors=[],this._postResponseInterceptors=[]}return t.prototype.get=function(t){for(var e=0;e<this._getRequestInterceptors.length;e++){var r=(0,this._getRequestInterceptors[e])(t);if(null!==r&&void 0!==r)return r}return null},t.prototype.post=function(t){for(var e=0;e<this._postRequestInterceptors.length;e++){var r=(0,this._postRequestInterceptors[e])(t);if(null!==r&&void 0!==r)return r}return null},t.prototype.responseGet=function(t,e){for(var r=0,n=this._getResponseInterceptors;r<n.length;r++){var a=(0,n[r])(t,e);if(a)return a}return e},t.prototype.responsePost=function(t,e){for(var r=0,n=this._postResponseInterceptors;r<n.length;r++){var a=(0,n[r])(t,e);if(a)return a}return e},t.prototype.registerRequestInterceptor=function(t,e){var r=this;this._interceptorTypeToArray(t).forEach(function(t){"get"===t?r._getRequestInterceptors.push(e):"post"===t&&r._postRequestInterceptors.push(e)})},t.prototype.registerResponseInterceptor=function(t,e){var r=this;this._interceptorTypeToArray(t).forEach(function(t){"get"===t?r._getResponseInterceptors.push(e):"post"===t&&r._postResponseInterceptors.push(e)})},t.prototype._interceptorTypeToArray=function(t){var e=this,r=[];if("string"==typeof t){if(!this._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");r.push(t.toLowerCase())}else{if(!Array.isArray(t))throw new Error("HttpClient.registerInterceptor: type must be a string or an array");t.forEach(function(t){if(!e._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");r.push(t.toLowerCase())})}return r},t.prototype._isValidInterceptorType=function(t){return-1!==["get","post"].indexOf(t)},t}();e.HttpClient=n,e.default=n},"./data-access/http/http-response.ts":
/*!*******************************************!*\
  !*** ./data-access/http/http-response.ts ***!
  \*******************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t){var e=t.statusCode,r=t.headers,n=t.body;this.statusCode=e,this.headers=r||[],this.body=n}}();e.default=n},"./data-access/http/node-http-client.ts":
/*!**********************************************!*\
  !*** ./data-access/http/node-http-client.ts ***!
  \**********************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! request */"request"),i=r(/*! ./http-client */"./data-access/http/http-client.ts"),s=r(/*! ./http-response */"./data-access/http/http-response.ts"),o=function(t){function e(e){var r=e.apiPrefix,n=t.call(this,{apiPrefix:r})||this;return n.request=a,n.cookieJar=n.request.jar(),n}return n(e,t),e.prototype._clearCookie=function(){this.cookieJar=this.request.jar()},e.prototype.get=function(e){var r=e.uri,n=e.params;try{var a=t.prototype.get.call(this,{uri:r,params:n});if(null!==a)return Promise.resolve(a)}catch(t){return Promise.reject(t)}var i=this._getWithoutInterceptor({uri:r,params:n});return t.prototype.responseGet.call(this,r,i)},e.prototype._getWithoutInterceptor=function(t){var e=t.uri,r=t.params,n={url:this.prefix+e,method:"GET",qs:r,jar:this.cookieJar};return this._httpResponseAdaptor({requestOptions:n})},e.prototype.post=function(e){var r=e.uri,n=e.data,a=e.binary;try{var i=t.prototype.post.call(this,{uri:r,data:n,binary:a});if(null!==i)return Promise.resolve(i)}catch(t){return Promise.reject(t)}var s={url:this.prefix+r,method:"POST",jar:this.cookieJar};s[a?"body":"form"]=n;try{a?s.headers={"Content-Type":"application/octet-stream"}:(s.headers={"Content-Type":"application/json"},s.form=JSON.stringify(n))}catch(t){return Promise.reject(t)}var o=this._httpResponseAdaptor({requestOptions:s});return t.prototype.responsePost.call(this,r,o)},e.prototype._httpResponseAdaptor=function(t){var e=this,r=t.requestOptions;return new Promise(function(t,n){e.request(r,function(e,r,a){e||r.statusCode>=400?n(e||{statusMessage:r.statusMessage,body:a}):t(new s.default({statusCode:r.statusCode,headers:[],body:a}))})})},e}(i.HttpClient);e.default=o},"./data-access/service/abstract-service.ts":
/*!*************************************************!*\
  !*** ./data-access/service/abstract-service.ts ***!
  \*************************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t){var e=t.wakJSC;this.wakJSC=e,this.httpClient=e._httpClient}}();e.default=n},"./data-access/service/base/catalog-base-service.ts":
/*!**********************************************************!*\
  !*** ./data-access/service/base/catalog-base-service.ts ***!
  \**********************************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.get=function(t){var e=t.httpClient,r=t.dataClasses,n=t.catalog,a="/";if(Array.isArray(r))a+=r.join();else{if(void 0!==r)throw new Error("Catalog.get: first parameter should be an array");a+="$all"}var i=n?"/"+n:"";return e.get({uri:"/rest/$catalog"+i+a}).then(function(t){var e=[],r=JSON.parse(t.body);if(r.dataClasses)for(var n=0,a=r.dataClasses;n<a.length;n++){var i=a[n],s=[];if(i.attributes)for(var o=0,c=i.attributes;o<c.length;o++){var u=c[o];s.push({name:u.name,kind:u.kind,type:u.type,readOnly:u.readOnly,simpleDate:void 0===u.simpleDate?void 0:u.simpleDate})}var l=[];if(i.methods)for(var p=0,d=i.methods;p<d.length;p++){var f=d[p];l.push({name:f.name,applyTo:f.applyTo})}e.push({name:i.name,collectionName:i.collectionName,attributes:s,methods:l,dataURI:i.dataURI})}return e})},t}();e.CatalogBaseService=n},"./data-access/service/base/collection-base-service.ts":
/*!*************************************************************!*\
  !*** ./data-access/service/base/collection-base-service.ts ***!
  \*************************************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../../util */"./data-access/util.ts"),a=function(){function t(){}return t.fetch=function(t){var e=t.httpClient,r=t.collectionUri,a=t.isEntitySet,i=t.options;if(!a&&i.select&&i.select.length>0)throw new Error("Collection.fetch: option select is not allowed when collection is deferred");i.method="subentityset";var s=n.default.handleOptions(i);a||(s="&"+s.slice(1));var o=r;return e.get({uri:o+s}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var r=0,a=e.__ENTITIES;r<a.length;r++){var i=a[r];n.default.removeRestInfoFromEntity(i)}return e})},t.callMethod=function(t){var e=t.httpClient,r=t.collectionUri,a=t.isEntitySet,i=t.methodName,s=t.parameters,o=r;a?o+="/"+i:o+="&"+n.default.handleOptions({method:"subentityset",emMethod:i}).slice(1);return e.post({uri:o,data:s}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t}();e.CollectionBaseService=a,e.isEntitySetUri=function(t){return/^\/rest\/\w+\/\$entityset\/[A-Z0-9]+(\?.*)?$/i.test(t)}},"./data-access/service/base/dataclass-base-service.ts":
/*!************************************************************!*\
  !*** ./data-access/service/base/dataclass-base-service.ts ***!
  \************************************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../../util */"./data-access/util.ts"),a=function(){function t(){}return t.find=function(t){var e=t.httpClient,r=t.key,a=t.options,i=t.dataURI;if("string"!=typeof r&&"number"!=typeof r)throw new Error("DataClass.find: Invalid id type");var s=n.default.handleOptions(a);return e.get({uri:i+"("+r+")"+s}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,n.default.removeRestInfoFromEntity(e),e})},t.query=function(t){var e=t.httpClient,r=t.options,a=t.dataURI;r.method="entityset",Array.isArray(r.params)&&(r.params=this._sanitizeOptionParams(r.params));var i=n.default.handleOptions(r);return e.get({uri:a+i}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var r=0,a=e.__ENTITIES;r<a.length;r++){var i=a[r];n.default.removeRestInfoFromEntity(i)}return e})},t.callMethod=function(t){var e=t.httpClient,r=t.methodName,n=t.parameters,a=t.dataURI;return e.post({uri:a+"/"+r,data:n}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t._sanitizeOptionParams=function(t){return t.map(function(t){return t instanceof Date?t.toISOString():t})},t}();e.DataClassBaseService=a},"./data-access/service/base/directory-base-service.ts":
/*!************************************************************!*\
  !*** ./data-access/service/base/directory-base-service.ts ***!
  \************************************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.login=function(t){var e=t.httpClient,r=t.username,n=t.password,a=t.duration;return e.post({uri:"/rest/$directory/login",data:[r,n,a]}).then(function(){return!0})},t.logout=function(t){return t.httpClient.get({uri:"/rest/$directory/logout"}).then(function(t){var e=JSON.parse(t.body);return!(!e.result||!0!==e.result)||Promise.reject(new Error)})},t.getCurrentUser=function(t){return t.httpClient.get({uri:"/rest/$directory/currentUser"}).then(function(t){var e=JSON.parse(t.body);return e.result&&e.result.ID?e.result:Promise.reject(new Error)})},t.getCurrentUserBelongsTo=function(t){var e=t.httpClient,r=t.group;return e.post({uri:"/rest/$directory/currentUserBelongsTo",data:[r]}).then(function(t){var e=JSON.parse(t.body);return!(!e||!e.result||!0!==e.result)||Promise.reject(new Error)})},t}();e.DirectoryBaseService=n},"./data-access/service/base/entity-base-service.ts":
/*!*********************************************************!*\
  !*** ./data-access/service/base/entity-base-service.ts ***!
  \*********************************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../../util */"./data-access/util.ts"),a=function(){function t(){}return t.save=function(t){var e=t.httpClient,r=t.data,a=t.expand,i=t.dataURI,s="";return a&&(s="&$expand="+a),e.post({uri:i+"?$method=update"+s,data:r}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,n.default.removeRestInfoFromEntity(e),e})},t.recompute=function(t){var e=t.httpClient,r=t.dataURI,a=t.data;return e.post({uri:r+"?$method=update&$refresh=true",data:a}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,n.default.removeRestInfoFromEntity(e),e})},t.callMethod=function(t){var e=t.httpClient,r=t.dataURI,n=t.methodName,a=t.parameters,i=t.entityKey;return e.post({uri:r+"("+i+")/"+n,data:a}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t.delete=function(t){var e=t.httpClient,r=t.dataURI,n=t.entityKey;return e.post({uri:r+"("+n+")?$method=delete"}).then(function(t){var e=JSON.parse(t.body);return!(!e||!0!==e.ok)||Promise.reject(new Error)})},t}();e.EntityBaseService=a},"./data-access/service/base/media-base-service.ts":
/*!********************************************************!*\
  !*** ./data-access/service/base/media-base-service.ts ***!
  \********************************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.upload=function(t){var e=t.httpClient,r=t.dataURI,n=t.entityKey,a=t.attributeName,i=t.file,s=t.isImage,o=this._buildUri(r,n,a);return s&&(o+="?$rawPict="+i.type),e.post({uri:o,data:i,binary:!0})},t.delete=function(t){var e=t.httpClient,r=t.dataURI,n=t.entityKey,a=r+"("+n+")",i={__KEY:n,__STAMP:t.entityStamp};return i[t.attributeName]=null,e.post({uri:a,data:i})},t._buildUri=function(t,e,r){return t+"("+e+")/"+r},t}();e.MediaBaseService=n},"./data-access/service/catalog-service.ts":
/*!************************************************!*\
  !*** ./data-access/service/catalog-service.ts ***!
  \************************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-service */"./data-access/service/abstract-service.ts"),i=r(/*! ./base/catalog-base-service */"./data-access/service/base/catalog-base-service.ts"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.get=function(t){return i.CatalogBaseService.get({httpClient:this.httpClient,dataClasses:t,catalog:this.wakJSC.catalog})},e}(a.default);e.default=s},"./data-access/service/collection-service.ts":
/*!***************************************************!*\
  !*** ./data-access/service/collection-service.ts ***!
  \***************************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-service */"./data-access/service/abstract-service.ts"),i=r(/*! ./base/collection-base-service */"./data-access/service/base/collection-base-service.ts"),s=function(t){function e(e){var r=e.wakJSC,n=e.collection,a=e.dataClassBusiness,s=e.collectionUri,o=t.call(this,{wakJSC:r})||this;return o.collection=n,o.dataClassBusiness=a,o.collectionUri=s,o.isEntitySet=i.isEntitySetUri(s),o}return n(e,t),e.prototype.fetch=function(t){var e=this;return i.CollectionBaseService.fetch({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,options:t}).then(function(t){return t.__ENTITYSET&&(e.collectionUri=t.__ENTITYSET,e.isEntitySet=i.isEntitySetUri(t.__ENTITYSET)),t})},e.prototype.callMethod=function(t,e){return i.CollectionBaseService.callMethod({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,methodName:t,parameters:e})},e}(a.default);e.default=s},"./data-access/service/dataclass-service.ts":
/*!**************************************************!*\
  !*** ./data-access/service/dataclass-service.ts ***!
  \**************************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-service */"./data-access/service/abstract-service.ts"),i=r(/*! ./base/dataclass-base-service */"./data-access/service/base/dataclass-base-service.ts"),s=function(t){function e(e){var r=e.wakJSC,n=e.dataClassBusiness,a=t.call(this,{wakJSC:r})||this;return a.dataClassBusiness=n,a}return n(e,t),e.prototype.find=function(t,e){return i.DataClassBaseService.find({httpClient:this.httpClient,key:t,options:e,dataURI:this.dataClassBusiness.dataURI})},e.prototype.query=function(t){return i.DataClassBaseService.query({httpClient:this.httpClient,options:t,dataURI:this.dataClassBusiness.dataURI})},e.prototype.callMethod=function(t,e){return i.DataClassBaseService.callMethod({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,methodName:t,parameters:e})},e}(a.default);e.default=s},"./data-access/service/directory-service.ts":
/*!**************************************************!*\
  !*** ./data-access/service/directory-service.ts ***!
  \**************************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-service */"./data-access/service/abstract-service.ts"),i=r(/*! ./base/directory-base-service */"./data-access/service/base/directory-base-service.ts"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.login=function(t,e,r){return i.DirectoryBaseService.login({httpClient:this.httpClient,username:t,password:e,duration:r})},e.prototype.logout=function(){return i.DirectoryBaseService.logout({httpClient:this.httpClient})},e.prototype.getCurrentUser=function(){return i.DirectoryBaseService.getCurrentUser({httpClient:this.httpClient})},e.prototype.getCurrentUserBelongsTo=function(t){return i.DirectoryBaseService.getCurrentUserBelongsTo({httpClient:this.httpClient,group:t})},e}(a.default);e.default=s},"./data-access/service/entity-service.ts":
/*!***********************************************!*\
  !*** ./data-access/service/entity-service.ts ***!
  \***********************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-service */"./data-access/service/abstract-service.ts"),i=r(/*! ./base/entity-base-service */"./data-access/service/base/entity-base-service.ts"),s=function(t){function e(e){var r=e.wakJSC,n=e.entity,a=e.dataClassBusiness,i=t.call(this,{wakJSC:r})||this;return i.entity=n,i.dataClassBusiness=a,i}return n(e,t),e.prototype.save=function(t,e){return i.EntityBaseService.save({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,expand:e,data:t})},e.prototype.recompute=function(t){return i.EntityBaseService.recompute({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,data:t})},e.prototype.callMethod=function(t,e){return i.EntityBaseService.callMethod({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,methodName:t,parameters:e,entityKey:this.entity._key})},e.prototype.delete=function(){return i.EntityBaseService.delete({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,entityKey:this.entity._key})},e}(a.default);e.default=s},"./data-access/service/media-service.ts":
/*!**********************************************!*\
  !*** ./data-access/service/media-service.ts ***!
  \**********************************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ./abstract-service */"./data-access/service/abstract-service.ts"),i=r(/*! ./base/media-base-service */"./data-access/service/base/media-base-service.ts"),s=function(t){function e(e){var r=e.wakJSC,n=e.mediaBusiness,a=e.media,i=e.attributeName,s=e.dataClassBusiness,o=t.call(this,{wakJSC:r})||this;return o.dataClassName=s.dataClass.name,o.dataURI=s.dataURI,o.entity=n.entity,o.isImage=n.isImage,o.media=a,o.attributeName=i,o}return n(e,t),e.prototype.upload=function(t,e){return i.MediaBaseService.upload({httpClient:this.httpClient,dataURI:this.dataURI,entityKey:this.entity._key,attributeName:this.attributeName,isImage:this.isImage,file:t})},e.prototype.delete=function(){return i.MediaBaseService.delete({httpClient:this.httpClient,dataURI:this.dataURI,entityKey:this.entity._key,entityStamp:this.entity._stamp,attributeName:this.attributeName})},e}(a.default);e.default=s},"./data-access/util.ts":
/*!*****************************!*\
  !*** ./data-access/util.ts ***!
  \*****************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.handleOptions=function(t){if(!t)return"";var e=t.select,r=t.filter,n=t.params,a=t.pageSize,i=t.start,s=t.orderBy,o=t.method,c=t.emMethod,u="?";if(e&&(u+="&$expand="+e),r&&(u+='&$filter="'+r+'"'),s&&(u+="&$orderby="+s),n){if(!Array.isArray(n))throw new Error("params option must be an array");if(n.length>0){for(var l="[",p=0,d=n;p<d.length;p++){var f=d[p];l+="string"==typeof f?'"'+f+'",':("string"==typeof f?f:JSON.stringify(f))+","}l=l.slice(0,-1),u+="&$params='"+(l+="]")+"'"}}if(a){if(!this.isInteger(a))throw new Error("pageSize option must be an integer");u+="&$limit="+a}if(i){if(!this.isInteger(i))throw new Error("start option must be an integer");u+="&$skip="+i}return o&&(u+="&$method="+o),c&&(u+="&$emMethod="+c),u.length>1&&"&"===u[1]&&(u=u.replace("?&","?")),"?"===u?"":u},t.isInteger=function(t){return"number"==typeof t&&!isNaN(t)&&t%1==0},t.removeRestInfoFromEntity=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e];r&&r.__deferred&&r.__deferred.__KEY&&delete r.__deferred.uri}},t}();e.default=n},"./node.ts":
/*!*****************!*\
  !*** ./node.ts ***!
  \*****************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./wakanda-client */"./wakanda-client.ts");e.WakandaClient=n.default;var a=r(/*! ./data-access/http/node-http-client */"./data-access/http/node-http-client.ts"),i=r(/*! ./data-access/service/base/catalog-base-service */"./data-access/service/base/catalog-base-service.ts");e.CatalogBaseService=i.CatalogBaseService;var s=r(/*! ./data-access/service/base/collection-base-service */"./data-access/service/base/collection-base-service.ts");e.CollectionBaseService=s.CollectionBaseService;var o=r(/*! ./data-access/service/base/dataclass-base-service */"./data-access/service/base/dataclass-base-service.ts");e.DataClassBaseService=o.DataClassBaseService;var c=r(/*! ./data-access/service/base/directory-base-service */"./data-access/service/base/directory-base-service.ts");e.DirectoryBaseService=c.DirectoryBaseService;var u=r(/*! ./data-access/service/base/entity-base-service */"./data-access/service/base/entity-base-service.ts");e.EntityBaseService=u.EntityBaseService;var l=r(/*! ./data-access/service/base/media-base-service */"./data-access/service/base/media-base-service.ts");e.MediaBaseService=l.MediaBaseService,n.default.HttpClient=a.default},"./presentation/catalog.ts":
/*!*********************************!*\
  !*** ./presentation/catalog.ts ***!
  \*********************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t){for(var e=0,r=t.dataClasses;e<r.length;e++){var n=r[e];this[n.name]=n}}}();e.default=n},"./presentation/collection.ts":
/*!************************************!*\
  !*** ./presentation/collection.ts ***!
  \************************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t){var e=t.deferred,r=t.dataClass;this.entities=[],this._deferred=!0===e,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:r})}}();e.default=n},"./presentation/dataclass.ts":
/*!***********************************!*\
  !*** ./presentation/dataclass.ts ***!
  \***********************************/
/*! no static exports found */function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(t){var e=t.name,r=t.collectionName,n=t.attributes,a=t.methods;this.name=e,this.collectionName=r,this.attributes=n,this.methods=a}}();e.DataClass=a;var i=function(){return function(t){var e=t.name,r=t.type,n=t.readOnly,a=t.kind,i=t.simpleDate;this.name=e,this.type=r,this.readOnly=!0===n,this.kind=a,this.simpleDate=i}}();e.Attribute=i;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.AttributeRelated=s;var o=function(t){function e(e){var r=e.name,n=e.type,a=e.readOnly,i=e.kind,s=e.entityType,o=t.call(this,{name:r,type:n,readOnly:a,kind:i})||this;return o.entityType=s,o}return n(e,t),e}(i);e.AttributeCollection=o},"./presentation/entity.ts":
/*!********************************!*\
  !*** ./presentation/entity.ts ***!
  \********************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t){var e=t.key,r=t.deferred,n=t.dataClass;this._key=e,this._deferred=!0===r,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:n})}}();e.default=n},"./presentation/media.ts":
/*!*******************************!*\
  !*** ./presentation/media.ts ***!
  \*******************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t){var e=t.uri;this.uri=e}}();e.default=n},"./wakanda-client.ts":
/*!***************************!*\
  !*** ./wakanda-client.ts ***!
  \***************************/
/*! no static exports found */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./business/catalog-business */"./business/catalog-business.ts"),a=r(/*! ./business/directory-business */"./business/directory-business.ts"),i=r(/*! ./presentation/entity */"./presentation/entity.ts"),s=r(/*! ./presentation/collection */"./presentation/collection.ts"),o=r(/*! ../package.json */"../package.json"),c=function(){function t(e){var r="object"==typeof e?e.host:void 0,n="object"==typeof e?e.catalog:void 0;this._httpClient=new t.HttpClient({apiPrefix:r||""}),this.catalog=n;var o=new a.default({wakJSC:this});this.directory={login:function(t,e,r){return o.login(t,e,r)},logout:function(){return o.logout()},getCurrentUser:function(){return o.getCurrentUser()},getCurrentUserBelongsTo:function(t){return o.getCurrentUserBelongsTo(t)}},this.helper={isEntity:function(t){return t instanceof i.default},isCollection:function(t){return t instanceof s.default}}}return t.prototype.getCatalog=function(t){return new n.default({wakJSC:this}).get(t)},t.prototype.version=function(){return o.version},t}();e.default=c},0:
/*!***********************!*\
  !*** multi ./node.ts ***!
  \***********************/
/*! no static exports found */function(t,e,r){t.exports=r(/*! ./node.ts */"./node.ts")},request:
/*!**************************!*\
  !*** external "request" ***!
  \**************************/
/*! no static exports found */function(t,e){t.exports=require("request")}})});
//# sourceMappingURL=node.js.map