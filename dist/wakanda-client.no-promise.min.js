/*! wakanda-client.no-promise.js - v2.0.0 - 2017-11-29 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WakandaClient=e():t.WakandaClient=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=69)}([function(t,e,n){var r=n(43)("wks"),o=n(18),i=n(1).Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(1),o=n(4),i=n(8),a=n(10),s=n(11),u=function(t,e,n){var c,l,f,p,d=t&u.F,h=t&u.G,y=t&u.S,v=t&u.P,_=t&u.B,m=h?r:y?r[e]||(r[e]={}):(r[e]||{}).prototype,b=h?o:o[e]||(o[e]={}),g=b.prototype||(b.prototype={});h&&(n=e);for(c in n)l=!d&&m&&void 0!==m[c],f=(l?m:n)[c],p=_&&l?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,m&&a(m,c,f,t&u.U),b[c]!=f&&i(b,c,p),v&&g[c]!=f&&(g[c]=f)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(9),o=n(37),i=n(39),a=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(5),o=n(17);t.exports=n(6)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(2);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(1),o=n(8),i=n(7),a=n(18)("src"),s=Function.toString,u=(""+s).split("toString");n(4).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(c&&(i(n,a)||o(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){var r=n(21);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.wakJSC;this.wakJSC=e}return t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.wakJSC;this.wakJSC=e,this.httpClient=e._httpClient}return t}();e.default=r},function(t,e){t.exports={}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Headers=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.headers=e}return o(t,[{key:"add",value:function(t,e){this.headers[t]=e}},{key:"get",value:function(t){return this.headers[t]}},{key:"clear",value:function(){this.headers={}}},{key:"configureXHR",value:function(t){var e,n=this.headers;for(e in n)t.setRequestHeader(e,n[e])}}],[{key:"parse",value:function(e){var n=new t;if(!e)return n;for(var r=e.split("\r\n"),o=0;o<r.length;o++){var i=r[o],a=i.indexOf(": ");if(a>0){var s=i.substring(0,a),u=i.substring(a+2);n.add(s,u)}}return n}}]),t}()},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(81),o=n(23);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(11),o=n(46),i=n(47),a=n(9),s=n(26),u=n(48),c={},l={},e=t.exports=function(t,e,n,f,p){var d,h,y,v,_=p?function(){return t}:u(t),m=r(n,f,e?2:1),b=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(i(_)){for(d=s(t.length);d>b;b++)if((v=e?m(a(h=t[b])[0],h[1]):m(t[b]))===c||v===l)return v}else for(y=_.call(t);!(h=y.next()).done;)if((v=o(y,m,h.value,e))===c||v===l)return v};e.BREAK=c,e.RETURN=l},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(77),o=n(3),i=n(10),a=n(8),s=n(7),u=n(14),c=n(78),l=n(28),f=n(85),p=n(0)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,y,v,_,m){c(n,e,y);var b,g,w,C=function(t){if(!d&&t in P)return P[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",O="values"==v,E=!1,P=t.prototype,k=P[p]||P["@@iterator"]||v&&P[v],j=k||C(v),M=v?O?C("entries"):j:void 0,T="Array"==e?P.entries||k:k;if(T&&(w=f(T.call(new t)))!==Object.prototype&&w.next&&(l(w,S,!0),r||s(w,p)||a(w,p,h)),O&&k&&"values"!==k.name&&(E=!0,j=function(){return k.call(this)}),r&&!m||!d&&!E&&P[p]||a(P,p,j),u[e]=j,u[S]=h,v)if(b={values:O?j:C("values"),keys:_?j:C("keys"),entries:M},m)for(g in b)g in P||i(P,g,b[g]);else o(o.P+o.F*(d||E),e,b);return b}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(22),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(43)("keys"),o=n(18);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(5).f,o=n(7),i=n(0)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(25),o=n(0)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:i?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){var e=t.name,n=t.collectionName,r=t.attributes,o=t.methods;this.name=e,this.collectionName=n,this.attributes=r,this.methods=o}return t}();e.DataClass=o;var i=function(){function t(t){var e=t.name,n=t.type,r=t.readOnly,o=t.kind,i=t.simpleDate;this.name=e,this.type=n,this.readOnly=!0===r,this.kind=o,this.simpleDate=i}return t}();e.Attribute=i;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i);e.AttributeRelated=a;var s=function(t){function e(e){var n=e.name,r=e.type,o=e.readOnly,i=e.kind,a=e.entityType,s=t.call(this,{name:n,type:r,readOnly:o,kind:i})||this;return s.entityType=a,s}return r(e,t),e}(i);e.AttributeCollection=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.handleOptions=function(t){if(!t)return"";var e=t.select,n=t.filter,r=t.params,o=t.pageSize,i=t.start,a=t.orderBy,s=t.method,u=t.emMethod,c="?";if(e&&(c+="&$expand="+e),n&&(c+='&$filter="'+n+'"'),a&&(c+="&$orderby="+a),r){if(!Array.isArray(r))throw new Error("params option must be an array");if(r.length>0){for(var l="[",f=0,p=r;f<p.length;f++){var d=p[f];l+="string"==typeof d?'"'+d+'",':d+","}l=l.slice(0,-1),l+="]",c+="&$params='"+l+"'"}}if(o){if(!this.isInteger(o))throw new Error("pageSize option must be an integer");c+="&$limit="+o}if(i){if(!this.isInteger(i))throw new Error("start option must be an integer");c+="&$skip="+i}return s&&(c+="&$method="+s),u&&(c+="&$emMethod="+u),c.length>1&&"&"===c[1]&&(c=c.replace("?&","?")),"?"===c?"":c},t.isInteger=function(t){return"number"==typeof t&&!isNaN(t)&&t%1==0},t.removeRestInfoFromEntity=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];n&&n.__deferred&&n.__deferred.__KEY&&delete n.__deferred.uri}},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.key,n=t.deferred,r=t.dataClass;this._key=e,this._deferred=!0===n,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:r})}return t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.transform=function(t,e){if(t&&t.__entityModel){var n=e.get(t.__entityModel);if(n){if(void 0!==t.__COUNT&&void 0!==t.__ENTITIES&&void 0!==t.__FIRST&&void 0!==t.__SENT)return n._presentationCollectionFromDbo({dbo:t});if(t.__KEY&&t.__STAMP)return n._presentationEntityFromDbo({dbo:t})}}return t},t}();e.MethodAdapter=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={DEFAULT_PAGE_SIZE:40,DEFAULT_SESSION_DURATION:3600}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){return new a.RequestMessageProcessor(XMLHttpRequest,[s.timeoutTransformer,s.credentialsTransformer,s.progressTransformer,s.responseTypeTransformer,s.headerTransformer,s.contentTransformer])}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpRequestMessage=void 0,e.createHttpRequestMessageProcessor=o;var i=n(15),a=n(66),s=n(68);e.HttpRequestMessage=function t(e,n,o,a){r(this,t),this.method=e,this.uri=n,this.content=o,this.headers=a||new i.Headers,this.responseType="json"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){return new s.RequestMessageProcessor(c,[u.timeoutTransformer,u.callbackParameterNameTransformer])}Object.defineProperty(e,"__esModule",{value:!0}),e.JSONPRequestMessage=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.createJSONPRequestMessageProcessor=o;var a=n(15),s=n(66),u=n(68),c=(e.JSONPRequestMessage=function t(e,n){r(this,t),this.method="JSONP",this.uri=e,this.content=void 0,this.headers=new a.Headers,this.responseType="jsonp",this.callbackParameterName=n},function(){function t(){r(this,t)}return i(t,[{key:"open",value:function(t,e){this.method=t,this.uri=e,this.callbackName="jsonp_callback_"+Math.round(1e5*Math.random())}},{key:"send",value:function(){var t=this,e=this.uri+(this.uri.indexOf("?")>=0?"&":"?")+this.callbackParameterName+"="+this.callbackName;window[this.callbackName]=function(e){delete window[t.callbackName],document.body.removeChild(n),void 0===t.status&&(t.status=200,t.statusText="OK",t.response=e,t.onload(t))};var n=document.createElement("script");n.src=e,document.body.appendChild(n),void 0!==this.timeout&&setTimeout(function(){void 0===t.status&&(t.status=0,t.ontimeout(new Error("timeout")))},this.timeout)}},{key:"abort",value:function(){void 0===this.status&&(this.status=0,this.onabort(new Error("abort")))}},{key:"setRequestHeader",value:function(){}}]),t}())},function(t,e,n){t.exports=!n(6)&&!n(16)(function(){return 7!=Object.defineProperty(n(38)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(2),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(2);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var r=n(76)(!0);n(24)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(9),o=n(79),i=n(44),a=n(27)("IE_PROTO"),s=function(){},u=function(){var t,e=n(38)("iframe"),r=i.length;for(e.style.display="none",n(84).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(80),o=n(44);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(1),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(23);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(9);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(14),o=n(0)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(29),o=n(0)("iterator"),i=n(14);t.exports=n(4).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(0)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(t){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(10);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(18)("meta"),o=n(2),i=n(7),a=n(5).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(16)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return c&&h.NEED&&u(t)&&!i(t,r)&&l(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},function(t,e,n){var r=n(2);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.get=function(t){var e=t.httpClient,n=t.dataClasses,r=t.catalog,o="/";if(Array.isArray(n))o+=n.join();else{if(void 0!==n)throw new Error("Catalog.get: first parameter should be an array");o+="$all"}var i=r?"/"+r:"";return e.get({uri:"/rest/$catalog"+i+o}).then(function(t){var e=[],n=JSON.parse(t.body);if(n.dataClasses)for(var r=0,o=n.dataClasses;r<o.length;r++){var i=o[r],a=[];if(i.attributes)for(var s=0,u=i.attributes;s<u.length;s++){var c=u[s];a.push({name:c.name,kind:c.kind,type:c.type,readOnly:c.readOnly,simpleDate:void 0===c.simpleDate?void 0:c.simpleDate})}var l=[];if(i.methods)for(var f=0,p=i.methods;f<p.length;f++){var d=p[f];l.push({name:d.name,applyTo:d.applyTo})}e.push({name:i.name,collectionName:i.collectionName,attributes:a,methods:l,dataURI:i.dataURI})}return e})},t}();e.CatalogBaseService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),o=function(){function t(){}return t.save=function(t){var e=t.httpClient,n=t.data,o=t.expand,i=t.dataURI,a="";return o&&(a="&$expand="+o),e.post({uri:i+"?$method=update"+a,data:n}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,r.default.removeRestInfoFromEntity(e),e})},t.recompute=function(t){var e=t.httpClient,n=t.dataURI,o=t.data;return e.post({uri:n+"?$method=update&$refresh=true",data:o}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,r.default.removeRestInfoFromEntity(e),e})},t.callMethod=function(t){var e=t.httpClient,n=t.dataURI,r=t.methodName,o=t.parameters,i=t.entityKey;return e.post({uri:n+"("+i+")/"+r,data:o}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t.delete=function(t){var e=t.httpClient,n=t.dataURI,r=t.entityKey;return e.post({uri:n+"("+r+")?$method=delete"}).then(function(t){var e=JSON.parse(t.body);return!(!e||!0!==e.ok)||Promise.reject(new Error)})},t}();e.EntityBaseService=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.uri;this.uri=e}return t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.wakParseSimpleDate=function(t){if(!t)return null;var e=t.split("!");return 3!==e.length?null:new Date(Date.UTC(parseInt(e[2],10),parseInt(e[1],10)-1,parseInt(e[0],10)))},t.wakToStringSimpleDate=function(t){return t instanceof Date?t.getUTCDate()+"!"+(t.getUTCMonth()+1)+"!"+t.getUTCFullYear():null},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),o=function(){function t(){}return t.find=function(t){var e=t.httpClient,n=t.key,o=t.options,i=t.dataURI;if("string"!=typeof n&&"number"!=typeof n)throw new Error("DataClass.find: Invalid id type");var a=r.default.handleOptions(o);return e.get({uri:i+"("+n+")"+a}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,r.default.removeRestInfoFromEntity(e),e})},t.query=function(t){var e=t.httpClient,n=t.options,o=t.dataURI;n.method="entityset",Array.isArray(n.params)&&(n.params=this._sanitizeOptionParams(n.params));var i=r.default.handleOptions(n);return e.get({uri:o+i}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var n=0,o=e.__ENTITIES;n<o.length;n++){var i=o[n];r.default.removeRestInfoFromEntity(i)}return e})},t.callMethod=function(t){var e=t.httpClient,n=t.methodName,r=t.parameters,o=t.dataURI;return e.post({uri:o+"/"+n,data:r}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t._sanitizeOptionParams=function(t){return t.map(function(t){return t instanceof Date?t.toISOString():t})},t}();e.DataClassBaseService=o},function(t,e,n){"use strict";function r(t){return/^\/rest\/\w+\/\$entityset\/[A-Z0-9]+(\?.*)?$/i.test(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(31),i=function(){function t(){}return t.fetch=function(t){var e=t.httpClient,n=t.collectionUri,r=t.isEntitySet,i=t.options;if(!r&&i.select&&i.select.length>0)throw new Error("Collection.fetch: option select is not allowed when collection is deferred");i.method="subentityset";var a=o.default.handleOptions(i);r||(a="&"+a.slice(1));var s=n;return e.get({uri:s+a}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var n=0,r=e.__ENTITIES;n<r.length;n++){var i=r[n];o.default.removeRestInfoFromEntity(i)}return e})},t.callMethod=function(t){var e=t.httpClient,n=t.collectionUri,r=t.isEntitySet,i=t.methodName,a=t.parameters,s=n;if(r)s+="/"+i;else{s+="&"+o.default.handleOptions({method:"subentityset",emMethod:i}).slice(1)}return e.post({uri:s,data:a}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t}();e.CollectionBaseService=i,e.isEntitySetUri=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.upload=function(t){var e=t.httpClient,n=t.dataURI,r=t.entityKey,o=t.attributeName,i=t.file,a=t.isImage,s=this._buildUri(n,r,o);return a&&(s+="?$rawPict="+i.type),e.post({uri:s,data:i,binary:!0})},t.delete=function(t){var e=t.httpClient,n=t.dataURI,r=t.entityKey,o=t.entityStamp,i=t.attributeName,a=n+"("+r+")",s={__KEY:r,__STAMP:o};return s[i]=null,e.post({uri:a,data:s})},t._buildUri=function(t,e,n){return t+"("+e+")/"+n},t}();e.MediaBaseService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.deferred,n=t.dataClass;this.entities=[],this._deferred=!0===e,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:n})}return t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.login=function(t){var e=t.httpClient,n=t.username,r=t.password,o=t.duration;return e.post({uri:"/rest/$directory/login",data:[n,r,o]}).then(function(){return!0})},t.logout=function(t){return t.httpClient.get({uri:"/rest/$directory/logout"}).then(function(t){var e=JSON.parse(t.body);return!(!e.result||!0!==e.result)||Promise.reject(new Error)})},t.getCurrentUser=function(t){return t.httpClient.get({uri:"/rest/$directory/currentUser"}).then(function(t){var e=JSON.parse(t.body);return e.result&&e.result.ID?e.result:Promise.reject(new Error)})},t.getCurrentUserBelongsTo=function(t){var e=t.httpClient,n=t.group;return e.post({uri:"/rest/$directory/currentUserBelongsTo",data:[n]}).then(function(t){var e=JSON.parse(t.body);return!(!e||!e.result||!0!==e.result)||Promise.reject(new Error)})},t}();e.DirectoryBaseService=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.RequestBuilder=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=(n(65),n(35)),a=n(36),s=e.RequestBuilder=function(){function t(e){r(this,t),this.client=e,this.transformers=e.requestTransformers.slice(0),this.useJsonp=!1}return o(t,[{key:"send",value:function(){var t=this.useJsonp?new a.JSONPRequestMessage:new i.HttpRequestMessage;return this.client.send(t,this.transformers)}}],[{key:"addHelper",value:function(e,n){t.prototype[e]=function(){return this.transformers.push(n.apply(this,arguments)),this}}}]),t}();s.addHelper("asDelete",function(){return function(t,e,n){n.method="DELETE"}}),s.addHelper("asGet",function(){return function(t,e,n){n.method="GET"}}),s.addHelper("asHead",function(){return function(t,e,n){n.method="HEAD"}}),s.addHelper("asOptions",function(){return function(t,e,n){n.method="OPTIONS"}}),s.addHelper("asPatch",function(){return function(t,e,n){n.method="PATCH"}}),s.addHelper("asPost",function(){return function(t,e,n){n.method="POST"}}),s.addHelper("asPut",function(){return function(t,e,n){n.method="PUT"}}),s.addHelper("asJsonp",function(t){return this.useJsonp=!0,function(e,n,r){r.callbackParameterName=t}}),s.addHelper("withUri",function(t){return function(e,n,r){r.uri=t}}),s.addHelper("withContent",function(t){return function(e,n,r){r.content=t}}),s.addHelper("withBaseUri",function(t){return function(e,n,r){r.baseUri=t}}),s.addHelper("withParams",function(t){return function(e,n,r){r.params=t}}),s.addHelper("withResponseType",function(t){return function(e,n,r){r.responseType=t}}),s.addHelper("withTimeout",function(t){return function(e,n,r){r.timeout=t}}),s.addHelper("withHeader",function(t,e){return function(n,r,o){o.headers.add(t,e)}}),s.addHelper("withCredentials",function(t){return function(e,n,r){r.withCredentials=t}}),s.addHelper("withReviver",function(t){return function(e,n,r){r.reviver=t}}),s.addHelper("withReplacer",function(t){return function(e,n,r){r.replacer=t}}),s.addHelper("withProgressCallback",function(t){return function(e,n,r){r.progressCallback=t}}),s.addHelper("withCallbackParameterName",function(t){return function(e,n,r){r.callbackParameterName=t}})},function(t,e,n){"use strict";function r(t){var e,n;for(e=0;e<t.length;++e)if("."===(n=t[e]))t.splice(e,1),e-=1;else if(".."===n){if(0===e||1==e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}function o(t,e){var n,o=e&&e.split("/");return t=t.trim(),t=t.split("/"),"."===t[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),t=n.concat(t)),r(t),t.join("/")}function i(t,e){var n,r,o,i,a,s;if(!t)return e;if(!e)return t;for(s=0===t.indexOf("//")?"//":0===t.indexOf("/")?"/":"",n=t.split("/"),r=e.split("/"),o=[],i=0,a=n.length;i<a;++i)if(".."==n[i])o.pop();else{if("."==n[i]||""==n[i])continue;o.push(n[i])}for(i=0,a=r.length;i<a;++i)if(".."==r[i])o.pop();else{if("."==r[i]||""==r[i])continue;o.push(r[i])}return s+o.join("/").replace(/\:\//g,"://")}function a(t){return null==t?t+"":"object"===(void 0===t?"undefined":c(t))||"function"==typeof t?p[toString.call(t)]||"object":void 0===t?"undefined":c(t)}function s(t,e){var n,r=[],o=function(t,e){e="function"==typeof e?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};for(n in t)u(n,t[n],e,o);return r.join("&").replace(l,"+")}function u(t,e,n,r){var o;if(Array.isArray(e))e.forEach(function(e,o){n||f.test(t)?r(t,e):u(t+"["+("object"===(void 0===e?"undefined":c(e))?o:"")+"]",e,n,r)});else if(n||"object"!==a(e))r(t,e);else for(o in e)u(t+"["+o+"]",e[o],n,r)}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.relativeToFile=o,e.join=i,e.buildQueryString=s;var l=/%20/g,f=/\[\]$/,p={};"Boolean Number String Function Array Date RegExp Object Error".split(" ").forEach(function(t,e){p["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e,n=(0,s.join)(t.baseUri,t.uri);t.params&&(e=(0,s.buildQueryString)(t.params),n=e?n+"?"+e:n),t.fullUri=n}Object.defineProperty(e,"__esModule",{value:!0}),e.RequestMessageProcessor=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(67),s=n(65);e.RequestMessageProcessor=function(){function t(e,n){r(this,t),this.XHRType=e,this.transformers=n}return i(t,[{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"process",value:function(t,e){var n=this;return new Promise(function(r,i){var s,u,c=n.xhr=new n.XHRType,l=n.transformers;for(o(e),c.open(e.method,e.fullUri,!0),s=0,u=l.length;s<u;++s)l[s](t,n,e,c);c.onload=function(t){var n=new a.HttpResponseMessage(e,c,e.responseType,e.reviver);n.isSuccess?r(n):i(n)},c.ontimeout=function(t){i(new a.HttpResponseMessage(e,{response:t,status:c.status,statusText:c.statusText},"timeout"))},c.onerror=function(t){i(new a.HttpResponseMessage(e,{response:t,status:c.status,statusText:c.statusText},"error"))},c.onabort=function(t){i(new a.HttpResponseMessage(e,{response:t,status:c.status,statusText:c.statusText},"abort"))},c.send(e.content)})}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpResponseMessage=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(15);e.HttpResponseMessage=function(){function t(e,n,o,a){r(this,t),this.requestMessage=e,this.statusCode=n.status,this.response=n.response,this.isSuccess=n.status>=200&&n.status<400,this.statusText=n.statusText,this.responseType=o,this.reviver=a,n.getAllResponseHeaders?this.headers=i.Headers.parse(n.getAllResponseHeaders()):this.headers=new i.Headers}return o(t,[{key:"content",get:function(){try{return void 0!==this._content?this._content:void 0===this.response||null===this.response?this._content=this.response:"json"===this.responseType?this._content=JSON.parse(this.response,this.reviver):this.reviver?this._content=this.reviver(this.response):this._content=this.response}catch(t){if(this.isSuccess)throw t;return this._content=null}}}]),t}()},function(t,e,n){"use strict";function r(t,e,n,r){void 0!==n.timeout&&(r.timeout=n.timeout)}function o(t,e,n,r){void 0!==n.callbackParameterName&&(r.callbackParameterName=n.callbackParameterName)}function i(t,e,n,r){void 0!==n.withCredentials&&(r.withCredentials=n.withCredentials)}function a(t,e,n,r){n.progressCallback&&(r.upload.onprogress=n.progressCallback)}function s(t,e,n,r){var o=n.responseType;"json"===o&&(o="text"),r.responseType=o}function u(t,e,n,r){n.headers.configureXHR(r)}function c(t,e,n,r){window.FormData&&n.content instanceof FormData||window.Blob&&n.content instanceof Blob||window.ArrayBufferView&&n.content instanceof ArrayBufferView||n.content instanceof Document||"string"!=typeof n.content&&null!==n.content&&void 0!==n.content&&(n.content=JSON.stringify(n.content,n.replacer))}Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutTransformer=r,e.callbackParameterNameTransformer=o,e.credentialsTransformer=i,e.progressTransformer=a,e.responseTypeTransformer=s,e.headerTransformer=u,e.contentTransformer=c},function(t,e,n){t.exports=n(70)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(71),n(75),n(88),n(91),n(111);var r=n(112);e.WakandaClient=r.default;var o=n(127),i=n(55);e.CatalogBaseService=i.CatalogBaseService;var a=n(60);e.CollectionBaseService=a.CollectionBaseService;var s=n(59);e.DataClassBaseService=s.DataClassBaseService;var u=n(63);e.DirectoryBaseService=u.DirectoryBaseService;var c=n(56);e.EntityBaseService=c.EntityBaseService;var l=n(61);e.MediaBaseService=l.MediaBaseService,r.default.HttpClient=o.default},function(t,e,n){n(72),t.exports=n(4).Function.bind},function(t,e,n){var r=n(3);r(r.P,"Function",{bind:n(73)})},function(t,e,n){"use strict";var r=n(21),o=n(2),i=n(74),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):i(e,r,t)};return o(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){n(40),n(86),t.exports=n(4).Array.from},function(t,e,n){var r=n(22),o=n(23);t.exports=function(t){return function(e,n){var i,a,s=String(o(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):i:t?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(t,e){t.exports=!1},function(t,e,n){"use strict";var r=n(41),o=n(17),i=n(28),a={};n(8)(a,n(0)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(5),o=n(9),i=n(42);t.exports=n(6)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(7),o=n(19),i=n(82)(!1),a=n(27)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(19),o=n(26),i=n(83);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=o(u.length),l=i(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(22),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(7),o=n(45),i=n(27)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var r=n(11),o=n(3),i=n(45),a=n(46),s=n(47),u=n(26),c=n(87),l=n(48);o(o.S+o.F*!n(49)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,p=i(t),d="function"==typeof this?this:Array,h=arguments.length,y=h>1?arguments[1]:void 0,v=void 0!==y,_=0,m=l(p);if(v&&(y=r(y,h>2?arguments[2]:void 0,2)),void 0==m||d==Array&&s(m))for(e=u(p.length),n=new d(e);e>_;_++)c(n,_,v?y(p[_],_):p[_]);else for(f=m.call(p),n=new d;!(o=f.next()).done;_++)c(n,_,v?a(f,y,[o.value,_],!0):o.value);return n.length=_,n}})},function(t,e,n){"use strict";var r=n(5),o=n(17);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){n(89),t.exports=n(4).Array.isArray},function(t,e,n){var r=n(3);r(r.S,"Array",{isArray:n(90)})},function(t,e,n){var r=n(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){n(92),n(40),n(93),n(96),n(104),n(107),n(109),t.exports=n(4).Map},function(t,e,n){"use strict";var r=n(29),o={};o[n(0)("toStringTag")]="z",o+""!="[object z]"&&n(10)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){for(var r=n(94),o=n(42),i=n(10),a=n(1),s=n(8),u=n(14),c=n(0),l=c("iterator"),f=c("toStringTag"),p=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(d),y=0;y<h.length;y++){var v,_=h[y],m=d[_],b=a[_],g=b&&b.prototype;if(g&&(g[l]||s(g,l,p),g[f]||s(g,f,_),u[_]=p,m))for(v in r)g[v]||i(g,v,r[v],!0)}},function(t,e,n){"use strict";var r=n(95),o=n(50),i=n(14),a=n(19);t.exports=n(24)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(0)("unscopables"),o=Array.prototype;void 0==o[r]&&n(8)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e,n){"use strict";var r=n(97),o=n(54);t.exports=n(99)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(o(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(5).f,o=n(41),i=n(51),a=n(11),s=n(52),u=n(20),c=n(24),l=n(50),f=n(98),p=n(6),d=n(53).fastKey,h=n(54),y=p?"_s":"size",v=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[y]=0,void 0!=r&&u(r,n,t[c],t)});return i(l.prototype,{clear:function(){for(var t=h(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var n=h(this,e),r=v(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[y]--}return!!r},forEach:function(t){h(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(h(this,e),t)}}),p&&r(l.prototype,"size",{get:function(){return h(this,e)[y]}}),l},def:function(t,e,n){var r,o,i=v(t,e);return i?i.v=n:(t._l=i={i:o=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[y]++,"F"!==o&&(t._i[o]=i)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=h(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(1),o=n(5),i=n(6),a=n(0)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(1),o=n(3),i=n(10),a=n(51),s=n(53),u=n(20),c=n(52),l=n(2),f=n(16),p=n(49),d=n(28),h=n(100);t.exports=function(t,e,n,y,v,_){var m=r[t],b=m,g=v?"set":"add",w=b&&b.prototype,C={},S=function(t){var e=w[t];i(w,t,"delete"==t?function(t){return!(_&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(_||w.forEach&&!f(function(){(new b).entries().next()}))){var O=new b,E=O[g](_?{}:-0,1)!=O,P=f(function(){O.has(1)}),k=p(function(t){new b(t)}),j=!_&&f(function(){for(var t=new b,e=5;e--;)t[g](e,e);return!t.has(-0)});k||(b=e(function(e,n){c(e,b,t);var r=h(new m,e,b);return void 0!=n&&u(n,v,r[g],r),r}),b.prototype=w,w.constructor=b),(P||j)&&(S("delete"),S("has"),v&&S("get")),(j||E)&&S(g),_&&w.clear&&delete w.clear}else b=y.getConstructor(e,t,v,g),a(b.prototype,n),s.NEED=!0;return d(b,t),C[t]=b,o(o.G+o.W+o.F*(b!=m),C),_||y.setStrong(b,t,v),b}},function(t,e,n){var r=n(2),o=n(101).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){var r=n(2),o=n(9),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(11)(Function.call,n(102).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){var r=n(103),o=n(17),i=n(19),a=n(39),s=n(7),u=n(37),c=Object.getOwnPropertyDescriptor;e.f=n(6)?c:function(t,e){if(t=i(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(3);r(r.P+r.R,"Map",{toJSON:n(105)("Map")})},function(t,e,n){var r=n(29),o=n(106);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){var r=n(20);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(108)("Map")},function(t,e,n){"use strict";var r=n(3);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(110)("Map")},function(t,e,n){"use strict";var r=n(3),o=n(21),i=n(11),a=n(20);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return o(this),e=void 0!==u,e&&o(u),void 0==t?new this:(n=[],e?(r=0,s=i(u,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}if("function"==typeof window.CustomEvent)return!1;t.prototype=window.Event.prototype,window.CustomEvent=t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(113),o=n(124),i=n(32),a=n(62),s=n(126),u=function(){function t(e){var n="object"==typeof e?e.host:void 0,r="object"==typeof e?e.catalog:void 0;this._httpClient=new t.HttpClient({apiPrefix:n||""}),this.catalog=r;var s=new o.default({wakJSC:this});this.directory={login:function(t,e,n){return s.login(t,e,n)},logout:function(){return s.logout()},getCurrentUser:function(){return s.getCurrentUser()},getCurrentUserBelongsTo:function(t){return s.getCurrentUserBelongsTo(t)}},this.helper={isEntity:function(t){return t instanceof i.default},isCollection:function(t){return t instanceof a.default}}}return t.prototype.getCatalog=function(t){return new r.default({wakJSC:this}).get(t)},t.prototype.version=function(){return s.version},t}();e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(114),a=n(115),s=n(30),u=n(116),c=function(t){function e(e){var n=t.call(this,e)||this;return n.service=new i.default({wakJSC:n.wakJSC}),n}return r(e,t),e.prototype.needDataClass=function(t){-1===this.seenDataClasses.indexOf(t)&&this.seenDataClasses.push(t)},e.prototype.get=function(t){var e=this;return this.seenDataClasses=[],this.service.get(t).then(function(t){for(var n=[],r=0,o=t;r<o.length;r++){for(var i=o[r],c=[],l=0,f=i.attributes;l<f.length;l++){var p=f[l];!function(n){switch(n.kind){case"relatedEntity":c.push(new s.AttributeRelated({name:n.name,type:n.type,kind:n.kind})),e.needDataClass(n.type);break;case"storage":case"calculated":case"alias":var r=n.readOnly||"image"===n.type||"blob"===n.type,o=void 0!==n.simpleDate?n.simpleDate:void 0;c.push(new s.Attribute({name:n.name,type:n.type,readOnly:r,kind:n.kind,simpleDate:o}));break;case"relatedEntities":var i;t.some(function(t){if(t.collectionName===n.type)return i=t.name,!0});var a=new s.AttributeCollection({name:n.name,type:n.type,kind:n.kind,entityType:i});c.push(a),e.needDataClass(a.entityType);break;default:throw new Error("[WakandaClient] Unhandled "+n.kind+" attribute type")}}(p)}for(var d={entity:[],collection:[],dataClass:[]},h=0,y=i.methods;h<y.length;h++){var v=y[h];switch(v.applyTo){case"entity":d.entity.push(v.name);break;case"entityCollection":d.collection.push(v.name);break;case"dataClass":d.dataClass.push(v.name);break;default:throw new Error("[WakandaClient] Unrecognized "+v.applyTo+" method type")}}var _=new s.DataClass({name:i.name,collectionName:i.collectionName,attributes:c,methods:d});new u.default({wakJSC:e.wakJSC,dataClass:_,methods:d,dataURI:i.dataURI})._decorateDataClass(),n.push(_)}for(var m=new a.default({dataClasses:n}),b=0,g=e.seenDataClasses;b<g.length;b++){var w=g[b];if(!m[w])throw new Error("Needed "+w+" dataClass is not present on catalog")}return m})},e}(o.default);e.default=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=n(55),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.get=function(t){return i.CatalogBaseService.get({httpClient:this.httpClient,dataClasses:t,catalog:this.wakJSC.catalog})},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){for(var e=t.dataClasses,n=0,r=e;n<r.length;n++){var o=r[n];this[o.name]=o}}return t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(117),a=n(119),s=n(120),u=n(122),c=n(32),l=n(62),f=n(30),p=n(57),d=n(34),h=n(33),y=n(58),v=new Map,_=function(t){function e(e){var n=e.wakJSC,r=e.dataClass,o=e.methods,i=e.dataURI,s=t.call(this,{wakJSC:n})||this;return s.dataClass=r,s.methods=o,s.service=new a.default({wakJSC:s.wakJSC,dataClassBusiness:s}),s.dataURI=i,v.set(r.name,s),s._dataClassBusinessMap=v,s}return r(e,t),e.prototype._decorateDataClass=function(){this.dataClass.find=this.find.bind(this),this.dataClass.query=this.query.bind(this),this.dataClass.create=this.create.bind(this),this._addUserDefinedMethods()},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.methods.dataClass.forEach(function(n){t.dataClass[n]=function(){var t=Array.from(arguments);return e.callMethod(n,t)}})},e.prototype.callMethod=function(t,e){var n=this;return this.service.callMethod(t,e).then(function(t){return h.MethodAdapter.transform(t,n._dataClassBusinessMap)})},e.prototype.find=function(t,e){var n=this,r=e||{};if(void 0!==r.filter||void 0!==r.params||void 0!==r.pageSize||void 0!==r.start||void 0!==r.orderBy)throw new Error("Dataclass.find: options filter, params, pageSize, start and orderBy are not allowed");return this.service.find(t,r).then(function(t){return n._presentationEntityFromDbo({dbo:t})})},e.prototype.query=function(t){var e=this,n=t||{},r=n.select;if(n.method&&n.method.length>0)throw new Error("Dataclass.query: option method is not allowed");return n.pageSize||(n.pageSize=d.default.DEFAULT_PAGE_SIZE),this.service.query(n).then(function(t){return e._presentationCollectionFromDbo({dbo:t,pageSize:n.pageSize,initialSelect:r})})},e.prototype.create=function(t){var e={};if(t)for(var n in t)t[n]instanceof c.default&&(e[n]=t[n],delete t[n]);var r=this._presentationEntityFromDbo({dbo:t||{}});for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},e.prototype._createEntity=function(t){var e=t.key,n=t.deferred,r=t.dbo,o=new c.default({key:e,deferred:n,dataClass:this.dataClass}),a=new i.default({wakJSC:this.wakJSC,dataClass:this.dataClass,entity:o,dataClassBusiness:this});return a._decorateEntity(),n||(this._populateEntityDataFromDbo({dbo:r,entity:o}),a._flashEntityValues()),o},e.prototype._createCollection=function(t){var e=t.uri,n=t.deferred,r=t.pageSize,o=t.initialSelect,i=new l.default({deferred:n,dataClass:this.dataClass});return new s.default({wakJSC:this.wakJSC,dataClass:this.dataClass,dataClassBusiness:this,collection:i,collectionUri:e,pageSize:r,initialSelect:o})._decorateCollection(),i},e.prototype._createMedia=function(t){var e=t.uri,n=t.isImage,r=t.attributeName,o=t.entity,i=new p.default({uri:e});return new u.default({wakJSC:this.wakJSC,media:i,dataClassBusiness:this,isImage:n,attributeName:r,entity:o})._decorateMedia(),i},e.prototype._populateEntityDataFromDbo=function(t){var e=t.dbo,n=t.entity;n._stamp=e.__STAMP;for(var r=0,o=this.dataClass.attributes;r<o.length;r++){var i=o[r],a=e[i.name];if(null!==a&&void 0!==a)if(i instanceof f.AttributeRelated){var s=v.get(i.type);n[i.name]=s._presentationEntityFromDbo({dbo:a})}else if(i instanceof f.AttributeCollection){var s=v.get(i.entityType);n[i.name]=s._presentationCollectionFromDbo({dbo:a})}else if("image"===i.type||"blob"===i.type){var u=void 0;u=a&&a.__deferred&&a.__deferred.uri?a.__deferred.uri:null,n[i.name]=this._createMedia({uri:u,isImage:"image"===i.type,attributeName:i.name,entity:n})}else"date"===i.type?n[i.name]=a?i.simpleDate?y.default.wakParseSimpleDate(a):new Date(a):null:n[i.name]=a;else"image"===i.type||"blob"===i.type?n[i.name]=this._createMedia({uri:null,isImage:"image"===i.type,attributeName:i.name,entity:n}):n[i.name]=null}return n},e.prototype._presentationEntityFromDbo=function(t){var e=t.dbo;return e||null,e.__deferred?this._createEntity({key:e.__deferred.__KEY,deferred:!0}):this._createEntity({key:e.__KEY,dbo:e})},e.prototype._presentationCollectionFromDbo=function(t){var e,n=t.dbo,r=t.pageSize,o=t.initialSelect;if(n)if(n.__deferred)e=this._createCollection({deferred:!0,uri:n.__deferred.uri});else{e=this._createCollection({uri:n.__ENTITYSET,pageSize:r||n.__ENTITIES.length,initialSelect:o}),e._count=n.__COUNT,e._first=n.__FIRST,e._sent=n.__SENT,e._pageSize=r;for(var i=0,a=n.__ENTITIES;i<a.length;i++){var s=a[i];e.entities.push(this._presentationEntityFromDbo({dbo:s}))}}else e=null;return e},e}(o.default);e.default=_},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(118),a=n(30),s=n(32),u=n(33),c=n(57),l=n(58),f=function(t){function e(e){var n=e.wakJSC,r=e.entity,o=e.dataClass,a=e.dataClassBusiness,s=t.call(this,{wakJSC:n})||this;return s.entity=r,s.dataClass=o,s.dataClassBusiness=a,s.service=new i.default({wakJSC:n,entity:r,dataClassBusiness:a}),s}return r(e,t),e.prototype._decorateEntity=function(){this.entity.save=this.save.bind(this),this.entity.delete=this.delete.bind(this),this.entity.fetch=this.fetch.bind(this),this.entity.recompute=this.recompute.bind(this),this._addUserDefinedMethods()},e.prototype._flashEntityValues=function(){for(var t={},e=this.entity,n=0,r=this.dataClass.attributes;n<r.length;n++){var o=r[n],i=e[o.name];if(!(o instanceof a.AttributeCollection))if(o instanceof a.AttributeRelated)t[o.name]=i?i._key:null;else switch(o.type){case"image":case"blob":t[o.name]={uri:i.uri};break;case"object":t[o.name]=JSON.stringify(i);break;case"date":t[o.name]=i?o.simpleDate?l.default.wakToStringSimpleDate(i):i.toJSON():null;break;default:t[o.name]=i}}this._oldEntityValues=t},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.entity.forEach(function(n){t.entity[n]=function(){var t=Array.from(arguments);return e.callMethod(n,t)}})},e.prototype.fetch=function(t){var e=this,n=t||{};if(void 0!==n.filter||void 0!==n.params||void 0!==n.pageSize||void 0!==n.start||void 0!==n.orderBy)throw new Error("Entity.fetch: options filter, params, pageSize, start and orderBy are not allowed");return this.dataClassBusiness.find(this.entity._key,t).then(function(t){return e._refreshEntity({fresherEntity:t}),e._flashEntityValues(),e.entity})},e.prototype.callMethod=function(t,e){var n=this;if(!this.entity._key)throw new Error("Entity."+t+": can not be called on an unsaved entity");return this.service.callMethod(t,e).then(function(t){return u.MethodAdapter.transform(t,n.dataClassBusiness._dataClassBusinessMap)})},e.prototype.delete=function(){var t=this;if(!this.entity._key)throw new Error("Entity.delete: can not delete unsaved entity");return this.service.delete().then(function(){t.entity=null})},e.prototype.save=function(){var t=this,e=this.prepareDataForSave(),n=this._getExpandString();return this.service.save(e,n).then(function(e){var n=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:n}),t._flashEntityValues(),t.entity})},e.prototype.recompute=function(){var t=this,e=this.prepareDataForSave();return this.service.recompute(e).then(function(e){var n=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:n}),t.entity})},e.prototype.prepareDataForSave=function(){var t={},e=!1;this.entity._key&&this.entity._stamp?(t.__KEY=this.entity._key,t.__STAMP=this.entity._stamp):e=!0;for(var n=0,r=this.dataClass.attributes;n<r.length;n++){var o=r[n],i=this.entity[o.name];if(void 0===i&&(i=null),o instanceof a.AttributeRelated)t[o.name]=i?i._key:null;else{if(o.readOnly)continue;"date"===o.type?t[o.name]=i?o.simpleDate?l.default.wakToStringSimpleDate(i):i.toJSON():i:o instanceof a.AttributeCollection||e&&null===i&&"ID"!==o.name||(t[o.name]=i)}}if(!e)for(var s=this._oldEntityValues||{},u=0,c=this.dataClass.attributes;u<c.length;u++){var o=c[u];if(void 0!==t[o.name]&&"ID"!==o.name)switch(o.type){case"image":case"blob":t[o.name].uri===s[o.name].uri&&delete t[o.name];break;case"object":JSON.stringify(t[o.name])===s[o.name]&&delete t[o.name];break;default:t[o.name]===s[o.name]&&delete t[o.name]}}return t},e.prototype._refreshEntity=function(t){var e=t.fresherEntity;for(var n in e)e.hasOwnProperty(n)&&"function"!=typeof e[n]&&(e[n]instanceof c.default?this.entity[n].uri=e[n].uri:this.entity[n]=e[n])},e.prototype._getExpandString=function(){for(var t="",e=0,n=this.dataClass.attributes;e<n.length;e++){var r=n[e];(r instanceof a.AttributeRelated||r instanceof a.AttributeCollection)&&this.entity[r.name]instanceof s.default&&!this.entity[r.name]._deferred&&(t+=r.name+",")}return t.length>0?t.slice(0,-1):null},e}(o.default);e.default=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=n(56),a=function(t){function e(e){var n=e.wakJSC,r=e.entity,o=e.dataClassBusiness,i=t.call(this,{wakJSC:n})||this;return i.entity=r,i.dataClassBusiness=o,i}return r(e,t),e.prototype.save=function(t,e){return i.EntityBaseService.save({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,expand:e,data:t})},e.prototype.recompute=function(t){return i.EntityBaseService.recompute({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,data:t})},e.prototype.callMethod=function(t,e){return i.EntityBaseService.callMethod({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,methodName:t,parameters:e,entityKey:this.entity._key})},e.prototype.delete=function(){return i.EntityBaseService.delete({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,entityKey:this.entity._key})},e}(o.default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=n(59),a=function(t){function e(e){var n=e.wakJSC,r=e.dataClassBusiness,o=t.call(this,{wakJSC:n})||this;return o.dataClassBusiness=r,o}return r(e,t),e.prototype.find=function(t,e){return i.DataClassBaseService.find({httpClient:this.httpClient,key:t,options:e,dataURI:this.dataClassBusiness.dataURI})},e.prototype.query=function(t){return i.DataClassBaseService.query({httpClient:this.httpClient,options:t,dataURI:this.dataClassBusiness.dataURI})},e.prototype.callMethod=function(t,e){return i.DataClassBaseService.callMethod({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,methodName:t,parameters:e})},e}(o.default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(121),a=n(34),s=n(33),u=function(t){function e(e){var n=e.wakJSC,r=e.dataClass,o=e.collection,a=e.dataClassBusiness,s=e.collectionUri,u=e.pageSize,c=e.initialSelect,l=t.call(this,{wakJSC:n})||this;return l.collection=o,l.dataClass=r,l.dataClassBusiness=a,l.service=new i.default({wakJSC:n,collection:o,dataClassBusiness:a,collectionUri:s}),l.pageSize=u,l.initialSelect=c,l}return r(e,t),e.prototype._decorateCollection=function(){this.collection.fetch=this.fetch.bind(this),this.collection.nextPage=this.nextPage.bind(this),this.collection.prevPage=this.prevPage.bind(this),this.collection.more=this.more.bind(this),this._addUserDefinedMethods()},e.prototype.fetch=function(t){var e=this,n=t||{};if(n.method&&n.method.length>0)throw new Error("Collection.fetch: option method is not allowed");return n.pageSize||(n.pageSize=this.pageSize?this.pageSize:a.default.DEFAULT_PAGE_SIZE),n.select&&(this.initialSelect=n.select),this.pageSize=n.pageSize,this.service.fetch(n).then(function(t){var n=e.dataClassBusiness._presentationCollectionFromDbo({dbo:t,pageSize:e.pageSize});return e._refreshCollection({fresherCollection:n}),e.collection})},e.prototype.more=function(){var t=this;if(!0===this.collection._deferred)throw new Error("Collection.more: can not call more on a deferred collection");var e={start:this.collection._first+this.collection._sent,pageSize:this.pageSize};return this.initialSelect&&(e.select=this.initialSelect),this.service.fetch(e).then(function(e){t.collection._sent+=e.__ENTITIES.length;for(var n=0,r=e.__ENTITIES;n<r.length;n++){var o=r[n];t.collection.entities.push(t.dataClassBusiness._presentationEntityFromDbo({dbo:o}))}return t.collection})},e.prototype.nextPage=function(){if(!0===this.collection._deferred)throw new Error("Collection.nextPage: can not call nextPage on a deferred collection");var t={start:this.collection._first+this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype.prevPage=function(){if(!0===this.collection._deferred)throw new Error("Collection.prevPage: can not call prevPage on a deferred collection");var t={start:this.collection._first-this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.collection.forEach(function(n){t.collection[n]=function(){var t=Array.from(arguments);return e.callMethod(n,t)}})},e.prototype.callMethod=function(t,e){var n=this;if(this.collection._deferred)throw new Error("Collection."+t+": can not be called on a deferred collection");return this.service.callMethod(t,e).then(function(t){return s.MethodAdapter.transform(t,n.dataClassBusiness._dataClassBusinessMap)})},e.prototype._refreshCollection=function(t){var e=t.fresherCollection;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&"function"!=typeof e[n]&&(this.collection[n]=e[n])},e}(o.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=n(60),a=function(t){function e(e){var n=e.wakJSC,r=e.collection,o=e.dataClassBusiness,a=e.collectionUri,s=t.call(this,{wakJSC:n})||this;return s.collection=r,s.dataClassBusiness=o,s.collectionUri=a,s.isEntitySet=i.isEntitySetUri(a),s}return r(e,t),e.prototype.fetch=function(t){var e=this;return i.CollectionBaseService.fetch({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,options:t}).then(function(t){return t.__ENTITYSET&&(e.collectionUri=t.__ENTITYSET,e.isEntitySet=i.isEntitySetUri(t.__ENTITYSET)),t})},e.prototype.callMethod=function(t,e){return i.CollectionBaseService.callMethod({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,methodName:t,parameters:e})},e}(o.default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(123),a=function(t){function e(e){var n=e.wakJSC,r=e.media,o=e.dataClassBusiness,a=e.isImage,s=e.attributeName,u=e.entity,c=t.call(this,{wakJSC:n})||this;return c.media=r,c.entity=u,c.dataClassBusiness=o,c.isImage=!0===a,c.service=new i.default({wakJSC:n,mediaBusiness:c,media:r,attributeName:s,dataClassBusiness:o}),c}return r(e,t),e.prototype._decorateMedia=function(){this.media.upload=this.upload.bind(this),this.media.delete=this.delete.bind(this)},e.prototype.upload=function(t){var e=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before uploading a media");return this.service.upload(t,t.type).then(function(t){return t}).then(function(){return e.entity.fetch()})},e.prototype.delete=function(){var t=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before deleting a media");return this.service.delete().then(function(){return t.entity.fetch()})},e}(o.default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=n(61),a=function(t){function e(e){var n=e.wakJSC,r=e.mediaBusiness,o=e.media,i=e.attributeName,a=e.dataClassBusiness,s=t.call(this,{wakJSC:n})||this;return s.dataClassName=a.dataClass.name,s.dataURI=a.dataURI,s.entity=r.entity,s.isImage=r.isImage,s.media=o,s.attributeName=i,s}return r(e,t),e.prototype.upload=function(t,e){return i.MediaBaseService.upload({httpClient:this.httpClient,dataURI:this.dataURI,entityKey:this.entity._key,attributeName:this.attributeName,isImage:this.isImage,file:t})},e.prototype.delete=function(){return i.MediaBaseService.delete({httpClient:this.httpClient,dataURI:this.dataURI,entityKey:this.entity._key,entityStamp:this.entity._stamp,attributeName:this.attributeName})},e}(o.default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(125),a=n(34),s=function(t){function e(e){var n=e.wakJSC,r=t.call(this,{wakJSC:n})||this;return r.service=new i.default({wakJSC:n}),r}return r(e,t),e.prototype.login=function(t,e,n){var r=n||a.default.DEFAULT_SESSION_DURATION;if("number"!=typeof r||r<=0)throw new Error("Directory.login: invalid duration parameter");return this.service.login(t,e,r).catch(function(){return Promise.reject(new Error("Directory.login: Unauthorized"))})},e.prototype.logout=function(){return this.service.logout().catch(function(){return Promise.reject(new Error("Directory.logout: logout failed"))})},e.prototype.getCurrentUser=function(){return this.service.getCurrentUser().then(function(t){return t}).catch(function(){return Promise.reject(new Error("Directory.getCurrentUser: user is not logged in"))})},e.prototype.getCurrentUserBelongsTo=function(t){if("string"!=typeof t)throw new Error("Directory.getCurrentUserBelongsTo: group must be a string");return this.service.getCurrentUserBelongsTo(t).then(function(){return!0}).catch(function(){return!1})},e}(o.default);e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=n(63),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.login=function(t,e,n){return i.DirectoryBaseService.login({httpClient:this.httpClient,username:t,password:e,duration:n})},e.prototype.logout=function(){return i.DirectoryBaseService.logout({httpClient:this.httpClient})},e.prototype.getCurrentUser=function(){return i.DirectoryBaseService.getCurrentUser({httpClient:this.httpClient})},e.prototype.getCurrentUserBelongsTo=function(t){return i.DirectoryBaseService.getCurrentUserBelongsTo({httpClient:this.httpClient,group:t})},e}(o.default);e.default=a},function(t,e){t.exports={name:"wakanda-client",main:"dist/wakanda-client.node.js",version:"2.0.0",description:"Wakanda Client allows you to easily interact with Wakanda Server on a JavaScript (browser or node) environment",typings:"dist/wakanda-client.d.ts",browser:"dist/wakanda-client.min.js",repository:"wakanda/wakanda-javascript-client",scripts:{watch:"webpack --progress --colors --watch",build:"webpack --progress --colors && npm run minify",minify:"webpack --progress --colors --config webpack.prod.js","test:all":"npm run test:karma && npm run test:node","test:karma":"karma start","test:node":"mocha test/bootstrap.js test/spec/**/*.spec.js",test:"node runTests.js","test-server:record":"node test/connect/server.js record",serve:'concurrently -r "npm run watch" "gulp serve"',tsc:"tsc",codecov:"cat coverage/*/lcov.info | codecov"},author:"Wakanda SAS",license:"MIT",devDependencies:{"babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-preset-env":"^1.6.1",chai:"^4.1.2",chalk:"^2.3.0","codecov.io":"^0.1.6",concurrently:"^3.5.0",connect:"^3.6.5","connect-prism":"git+https://git@github.com/seglo/connect-prism.git",eslint:"^4.11.0","eslint-loader":"^1.9.0",gulp:"^3.9.1","gulp-connect":"^5.0.0","http-proxy-middleware":"^0.17.4","istanbul-instrumenter-loader":"^3.0.0",karma:"^1.7.1","karma-chai":"^0.1.0","karma-coverage":"^1.1.1","karma-coverage-istanbul-reporter":"^1.3.0","karma-mocha":"^1.3.0","karma-phantomjs-launcher":"^1.0.4","karma-verbose-reporter":"0.0.6",lodash:"^4.17.4",mocha:"^4.0.1",path:"^0.12.7","phantomjs-prebuilt":"^2.1.16","ts-loader":"^3.1.1",tslint:"^5.8.0","tslint-loader":"^3.5.3",typescript:"^2.6.1",webpack:"^3.8.1"},dependencies:{"core-js":"^2.5.1",request:"^2.83.0"}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(128),i=n(129),a=n(130).HttpClient,s=function(t){function e(e){var n=e.apiPrefix,r=t.call(this,{apiPrefix:n})||this;return r.client=new a,r}return r(e,t),e.prototype.get=function(e){var n=e.uri,r=e.params;try{var o=t.prototype.get.call(this,{uri:n,params:r});if(null!==o)return Promise.resolve(o)}catch(t){return Promise.reject(t)}var i=this._getWithoutInterceptor({uri:n,params:r});return t.prototype.responseGet.call(this,n,i)},e.prototype._getWithoutInterceptor=function(t){var e=t.uri,n=this.client.createRequest(this.prefix+e).asGet().withCredentials(!0).send();return this._httpResponseAdaptor({request:n})},e.prototype.post=function(e){var n=e.uri,r=e.data,o=e.binary;try{var i=t.prototype.post.call(this,{uri:n,data:r,binary:o});if(null!==i)return Promise.resolve(i)}catch(t){return Promise.reject(t)}var a=this.client.createRequest(this.prefix+n).asPost().withContent(r).withCredentials(!0).send(),s=this._httpResponseAdaptor({request:a});return t.prototype.responsePost.call(this,n,s)},e.prototype._httpResponseAdaptor=function(t){return t.request.then(function(t){return new i.default({statusCode:t.statusCode,headers:[],body:t.response})})},e}(o.HttpClient);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.apiPrefix;this.prefix=e,this._getRequestInterceptors=[],this._postRequestInterceptors=[],this._getResponseInterceptors=[],this._postResponseInterceptors=[]}return t.prototype.get=function(t){for(var e=0;e<this._getRequestInterceptors.length;e++){var n=this._getRequestInterceptors[e],r=n(t);if(null!==r&&void 0!==r)return r}return null},t.prototype.post=function(t){for(var e=0;e<this._postRequestInterceptors.length;e++){var n=this._postRequestInterceptors[e],r=n(t);if(null!==r&&void 0!==r)return r}return null},t.prototype.responseGet=function(t,e){for(var n=0,r=this._getResponseInterceptors;n<r.length;n++){var o=r[n],i=o(t,e);if(i)return i}return e},t.prototype.responsePost=function(t,e){for(var n=0,r=this._postResponseInterceptors;n<r.length;n++){var o=r[n],i=o(t,e);if(i)return i}return e},t.prototype.registerRequestInterceptor=function(t,e){var n=this;this._interceptorTypeToArray(t).forEach(function(t){"get"===t?n._getRequestInterceptors.push(e):"post"===t&&n._postRequestInterceptors.push(e)})},t.prototype.registerResponseInterceptor=function(t,e){var n=this;this._interceptorTypeToArray(t).forEach(function(t){"get"===t?n._getResponseInterceptors.push(e):"post"===t&&n._postResponseInterceptors.push(e)})},t.prototype._interceptorTypeToArray=function(t){var e=this,n=[];if("string"==typeof t){if(!this._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");n.push(t.toLowerCase())}else{if(!Array.isArray(t))throw new Error("HttpClient.registerInterceptor: type must be a string or an array");t.forEach(function(t){if(!e._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");n.push(t.toLowerCase())})}return n},t.prototype._isValidInterceptorType=function(t){return-1!==["get","post"].indexOf(t)},t}();e.HttpClient=r,e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.statusCode,n=t.headers,r=t.body;this.statusCode=e,this.headers=n||[],this.body=r}return t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(131);Object.defineProperty(e,"HttpClient",{enumerable:!0,get:function(){return r.HttpClient}});var o=n(35);Object.defineProperty(e,"HttpRequestMessage",{enumerable:!0,get:function(){return o.HttpRequestMessage}});var i=n(67);Object.defineProperty(e,"HttpResponseMessage",{enumerable:!0,get:function(){return i.HttpResponseMessage}});var a=n(36);Object.defineProperty(e,"JSONPRequestMessage",{enumerable:!0,get:function(){return a.JSONPRequestMessage}});var s=n(15);Object.defineProperty(e,"Headers",{enumerable:!0,get:function(){return s.Headers}});var u=n(64);Object.defineProperty(e,"RequestBuilder",{enumerable:!0,get:function(){return u.RequestBuilder}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){t.pendingRequests.push(e),t.isRequesting=!0}function i(t,e){var n=t.pendingRequests.indexOf(e);if(t.pendingRequests.splice(n,1),t.isRequesting=t.pendingRequests.length>0,!t.isRequesting){var r=new window.CustomEvent("aurelia-http-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout(function(){return document.dispatchEvent(r)},1)}}Object.defineProperty(e,"__esModule",{value:!0}),e.HttpClient=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=(n(15),n(64)),u=n(35),c=n(36);e.HttpClient=function(){function t(){r(this,t),this.requestTransformers=[],this.requestProcessorFactories=new Map,this.requestProcessorFactories.set(u.HttpRequestMessage,u.createHttpRequestMessageProcessor),this.requestProcessorFactories.set(c.JSONPRequestMessage,c.createJSONPRequestMessageProcessor),this.pendingRequests=[],this.isRequesting=!1}return a(t,[{key:"configure",value:function(t){var e=new s.RequestBuilder(this);return t(e),this.requestTransformers=e.transformers,this}},{key:"createRequest",value:function(t){var e=new s.RequestBuilder(this);return t&&e.withUri(t),e}},{key:"send",value:function(t,e){var n,r,a,s,u=this,c=this.requestProcessorFactories.get(t.constructor);if(!c)throw new Error("No request message processor factory for "+t.constructor+".");for(n=c(),o(this,n),e=e||this.requestTransformers,a=0,s=e.length;a<s;++a)e[a](this,n,t);return r=n.process(this,t),r.abort=r.cancel=function(){n.abort()},r.then(function(t){return i(u,n),t}).catch(function(t){throw i(u,n),t})}},{key:"delete",value:function(t){return this.createRequest(t).asDelete().send()}},{key:"get",value:function(t){return this.createRequest(t).asGet().send()}},{key:"head",value:function(t){return this.createRequest(t).asHead().send()}},{key:"jsonp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jsoncallback";return this.createRequest(t).asJsonp(e).send()}},{key:"options",value:function(t){return this.createRequest(t).asOptions().send()}},{key:"put",value:function(t,e){return this.createRequest(t).asPut().withContent(e).send()}},{key:"patch",value:function(t,e){return this.createRequest(t).asPatch().withContent(e).send()}},{key:"post",value:function(t,e){return this.createRequest(t).asPost().withContent(e).send()}}]),t}()}])});
//# sourceMappingURL=wakanda-client.no-promise.min.js.map